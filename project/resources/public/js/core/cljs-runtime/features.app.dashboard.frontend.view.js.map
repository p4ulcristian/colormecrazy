{"version":3,"sources":["features/app/dashboard/frontend/view.cljs"],"mappings":"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","names":["features.app.dashboard.frontend.view/check-auth-and-redirect","auth-user","auth-loading?","cljs.core/reset!","parquery.frontend.request/send-queries","response","user","js/window","features.app.dashboard.frontend.view/handle-logout","features.app.dashboard.frontend.view/loading-screen","features.app.dashboard.frontend.view/header-section","features.app.dashboard.frontend.view/not-invited-message","features.app.dashboard.frontend.view/help-section","features.app.dashboard.frontend.view/main-content","features.app.dashboard.frontend.view/auth-required-screen","features.app.dashboard.frontend.view/view","reagent.core.atom","cljs.core/deref"],"sourcesContent":["(ns features.app.dashboard.frontend.view\n  (:require [reagent.core :as r]\n            [parquery.frontend.request :as parquery]))\n\n(defn- check-auth-and-redirect [auth-user auth-loading?]\n  \"Check authentication and redirect based on user workspace status\"\n  (reset! auth-loading? true)\n  (parquery/send-queries\n    {:queries {:user/current {}}\n     :parquery/context {}\n     :callback (fn [response]\n                 (let [user (:user/current response)]\n                   (reset! auth-user user)\n                   (reset! auth-loading? false)\n                   (when-not user\n                     (set! (.-location js/window) \"/login\"))\n                   (when (:user/workspace-id user)\n                     (set! (.-location js/window) (str \"/app/\" (:user/workspace-id user))))))}))\n\n(defn- handle-logout []\n  \"Handle user logout\"\n  (parquery/send-queries\n    {:queries {:users/logout {}}\n     :parquery/context {}\n     :callback (fn [response]\n                 (when (:success (:users/logout response))\n                   (set! (.-location js/window) \"/login\")))}))\n\n(defn- loading-screen []\n  \"Loading state component\"\n  [:div {:style {:min-height \"100vh\"\n                 :display \"flex\"\n                 :align-items \"center\"\n                 :justify-content \"center\"\n                 :background \"#c9ddd8\"}}\n   [:div {:class \"loading-spinner\"}]])\n\n(defn- header-section [auth-user]\n  \"Header with title and user info\"\n  [:div {:style {:display \"flex\" :justify-content \"space-between\" :align-items \"center\" :margin-bottom \"3rem\"}}\n   [:h1 {:style {:color \"#333\" :margin \"0\"}}\n    \"Expert Lift\"]\n   [:div {:style {:display \"flex\" :gap \"1rem\" :align-items \"center\"}}\n    [:span {:style {:color \"#666\"}}\n     (str \"Welcome, \" (:user/full-name auth-user))]\n    [:button {:on-click handle-logout\n              :style {:padding \"0.5rem 1rem\" :background \"#dc3545\" :color \"white\" :border \"none\" :border-radius \"4px\" :cursor \"pointer\"}}\n     \"Logout\"]]])\n\n(defn- not-invited-message []\n  \"Message for users not invited to any workspaces\"\n  [:div {:style {:margin-bottom \"2rem\"}}\n   [:div {:style {:font-size \"4rem\" :margin-bottom \"1rem\"}} \"\ud83d\udeab\"]\n   [:h2 {:style {:color \"#333\" :margin-bottom \"1rem\"}} \"Not Invited to Any Workspaces\"]\n   [:p {:style {:color \"#666\" :font-size \"1.1rem\" :line-height \"1.6\" :max-width \"500px\" :margin \"0 auto\"}}\n    \"You haven't been invited to any workspaces yet. Please contact your administrator to be added to a workspace to access the application features.\"]])\n\n(defn- help-section []\n  \"Help and support information\"\n  [:div {:style {:border-top \"1px solid #eee\" :padding-top \"2rem\" :margin-top \"2rem\"}}\n   [:p {:style {:color \"#888\" :font-size \"0.9rem\"}}\n    \"Need help? Contact your system administrator or reach out to support.\"]])\n\n(defn- main-content [auth-user]\n  \"Main dashboard content for users without workspace\"\n  [:div {:style {:min-height \"100vh\"\n                 :background \"#c9ddd8\"\n                 :padding \"2rem\"}}\n   [:div {:style {:max-width \"800px\"\n                  :margin \"0 auto\"}}\n    [header-section auth-user]\n    [:div {:style {:background \"white\" :border-radius \"8px\" :padding \"3rem\" :box-shadow \"0 2px 4px rgba(0,0,0,0.1)\" :text-align \"center\"}}\n     [not-invited-message]\n     [help-section]]]])\n\n(defn- auth-required-screen []\n  \"Screen shown when authentication is required\"\n  [:div {:style {:min-height \"100vh\"\n                 :display \"flex\"\n                 :align-items \"center\"\n                 :justify-content \"center\"\n                 :background \"#c9ddd8\"}}\n   [:div {:style {:text-align \"center\"}}\n    [:h2 \"Authentication Required\"]\n    [:p \"Please log in to access this page.\"]\n    [:button {:on-click #(set! (.-location js/window) \"/login\")\n              :style {:padding \"0.5rem 1rem\" :background \"#72a9bf\" :color \"white\" :border \"none\" :border-radius \"4px\" :cursor \"pointer\"}}\n     \"Go to Login\"]]])\n\n(defn view []\n  \"Main dashboard view for users not invited to workspaces\"\n  (let [auth-user (r/atom nil)\n        auth-loading? (r/atom true)]\n    \n    ;; Check auth on component mount\n    (check-auth-and-redirect auth-user auth-loading?)\n    \n    (fn []\n      (cond\n        @auth-loading? [loading-screen]\n        @auth-user [main-content @auth-user]\n        :else [auth-required-screen]))))"]}
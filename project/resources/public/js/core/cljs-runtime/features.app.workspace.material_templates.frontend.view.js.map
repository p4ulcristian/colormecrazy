{"version":3,"sources":["features/app/workspace/material_templates/frontend/view.cljs"],"mappings":"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","names":["features.app.workspace.material-templates.frontend.view/get-workspace-id","cljs.core/deref","router-state","router.frontend.zero/state","workspace-id","cljs.core.get_in","cljs.core.println","features.app.workspace.material-templates.frontend.view/load-templates-query","loading?","templates","parquery.frontend.request/send-queries","response","cljs.core/reset!","result","or__5025__auto__","features.app.workspace.material-templates.frontend.view/get-query-type","is-new?","features.app.workspace.material-templates.frontend.view/prepare-template-data","template","cljs.core.dissoc","features.app.workspace.material-templates.frontend.view/handle-save-response","query-type","callback","modal-template","load-templates","cljs.core.get","js/alert","features.app.workspace.material-templates.frontend.view/save-template-query","modal-is-new?","template-data","context","features.app.workspace.material-templates.frontend.view/delete-template-query","template-id","features.app.workspace.material-templates.frontend.view/validate-name","name","clojure.string/trim","features.app.workspace.material-templates.frontend.view/validate-unit","unit","features.app.workspace.material-templates.frontend.view/validate-material-template","errors","G__14646","cljs.core.assoc","features.app.workspace.material-templates.frontend.view/field-label","label","field-key","has-error?","fexpr__14647","p1__14648#","features.app.workspace.material-templates.frontend.view/input-base-props","attrs","cljs.core.swap_BANG_","cljs.core/assoc","cljs.core.merge","features.app.workspace.material-templates.frontend.view/render-textarea","features.app.workspace.material-templates.frontend.view/render-text-input","features.app.workspace.material-templates.frontend.view/field-input","cljs.core._EQ_","features.app.workspace.material-templates.frontend.view/field-error","error-msg","features.app.workspace.material-templates.frontend.view/form-field","cljs.core/contains?","features.app.workspace.material-templates.frontend.view/modal-overlay","features.app.workspace.material-templates.frontend.view/modal-content","features.app.workspace.material-templates.frontend.view/modal-title","features.app.workspace.material-templates.frontend.view/form-fields","features.app.workspace.material-templates.frontend.view/active-checkbox","p1__14649#","cljs.core/boolean","features.app.workspace.material-templates.frontend.view/handle-save-click","on-save","validation-errors","cljs.core/empty?","G__14650","G__14651","features.app.workspace.material-templates.frontend.view/modal-buttons","on-cancel","features.app.workspace.material-templates.frontend.view/material-template-modal","reagent.core.atom","features.app.workspace.material-templates.frontend.view/table-header-style","features.app.workspace.material-templates.frontend.view/table-cell-style","features.app.workspace.material-templates.frontend.view/template-name-cell","features.app.workspace.material-templates.frontend.view/material-template-table","on-edit","on-delete","iter__5503__auto__","s__14653","cljs.core/LazySeq","temp__5823__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__5501__auto__","size__5502__auto__","cljs.core/count","b__14655","cljs.core/chunk-buffer","i__14654","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__14652","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","js/confirm","G__14656","G__14657","features.app.workspace.material-templates.frontend.view/page-header","features.app.workspace.material-templates.frontend.view/templates-content","delete-template","features.app.workspace.material-templates.frontend.view/modal-when-open","save-template","features.app.workspace.material-templates.frontend.view/view","authenticated?","zero.frontend.react/use-effect","user","and__5023__auto__","js/window","cljs.core/chunk-first"],"sourcesContent":["(ns features.app.workspace.material-templates.frontend.view\n  (:require [reagent.core :as r]\n            [clojure.string :as str]\n            [parquery.frontend.request :as parquery]\n            [router.frontend.zero :as router]\n            [zero.frontend.re-frame]\n            [zero.frontend.react :as zero-react]))\n\n(defn- get-workspace-id []\n  \"Get workspace ID from router parameters\"\n  (let [router-state @router/state\n        workspace-id (get-in router-state [:parameters :path :workspace-id])]\n    (println \"DEBUG: get-workspace-id called\")\n    (println \"  Router state:\" router-state)\n    (println \"  Extracted workspace-id:\" workspace-id)\n    workspace-id))\n\n(defn- load-templates-query [workspace-id loading? templates]\n  \"Execute ParQuery to load templates\"\n  (parquery/send-queries\n   {:queries {:workspace-material-templates/get-all {}}\n    :parquery/context {:workspace-id workspace-id}\n    :callback (fn [response]\n               (reset! loading? false)\n               (let [result (:workspace-material-templates/get-all response)]\n                 (reset! templates (or result []))))}))\n\n(defn- get-query-type [is-new?]\n  \"Get appropriate query type for save operation\"\n  (if @is-new? \n    :workspace-material-templates/create \n    :workspace-material-templates/update))\n\n(defn- prepare-template-data [template is-new?]\n  \"Prepare template data for save\"\n  (if @is-new?\n    (dissoc template :material-template/id)\n    template))\n\n(defn- handle-save-response [response query-type callback modal-template load-templates]\n  \"Handle save response and update UI\"\n  (callback)\n  (if (:success (get response query-type))\n    (do (reset! modal-template nil)\n        (load-templates))\n    (js/alert (str \"Error: \" (:error (get response query-type))))))\n\n(defn- save-template-query [template workspace-id modal-is-new? callback modal-template load-templates]\n  \"Execute ParQuery to save template\"\n  (let [query-type (get-query-type modal-is-new?)\n        template-data (prepare-template-data template modal-is-new?)\n        context {:workspace-id workspace-id}]\n    (println \"DEBUG: save-template-query called\")\n    (println \"  Workspace ID:\" workspace-id)\n    (println \"  Query type:\" query-type)\n    (println \"  Template data:\" template-data)\n    (println \"  Context being sent:\" context)\n    (parquery/send-queries\n     {:queries {query-type template-data}\n      :parquery/context context\n      :callback (fn [response]\n                 (println \"DEBUG: save-template-query response:\" response)\n                 (handle-save-response response query-type callback modal-template load-templates))})))\n\n(defn- delete-template-query [template-id workspace-id load-templates]\n  \"Execute ParQuery to delete template\"\n  (parquery/send-queries\n   {:queries {:workspace-material-templates/delete {:material-template/id template-id}}\n    :parquery/context {:workspace-id workspace-id}\n    :callback (fn [response]\n               (if (:success (:workspace-material-templates/delete response))\n                 (load-templates)\n                 (js/alert \"Error deleting template\")))}))\n\n(defn- validate-name [name]\n  \"Validate template name\"\n  (< (count (str/trim (str name))) 2))\n\n(defn- validate-unit [unit]\n  \"Validate template unit\"\n  (< (count (str/trim (str unit))) 1))\n\n(defn validate-material-template\n  \"Validates material template data and returns map of field errors\"\n  [template]\n  (let [errors {}\n        name (:material-template/name template)\n        unit (:material-template/unit template)]\n    (cond-> errors\n      (validate-name name) (assoc :material-template/name \"Name is required\")\n      (validate-unit unit) (assoc :material-template/unit \"Unit is required\"))))\n\n(defn- field-label [label field-key has-error?]\n  [:label {:style {:display \"block\" :margin-bottom \"0.5rem\" :font-weight \"600\"\n                   :font-size \"0.875rem\" :letter-spacing \"0.025em\"\n                   :color (if has-error? \"#dc3545\" \"#374151\")}}\n   label \n   (when (#{:material-template/name :material-template/unit} field-key) \n     [:span {:style {:color \"#ef4444\" :margin-left \"0.25rem\"}} \"*\"])])\n\n(defn- input-base-props [field-key template has-error? attrs]\n  \"Base properties for input fields\"\n  {:value (str (get @template field-key \"\"))\n   :on-change #(swap! template assoc field-key (.. % -target -value))\n   :style (merge {:width \"100%\"\n                  :padding \"0.75rem 1rem\"\n                  :border (if has-error? \"2px solid #dc3545\" \"1px solid #d1d5db\")\n                  :border-radius \"8px\"\n                  :font-size \"1rem\"\n                  :line-height \"1.5\"\n                  :transition \"border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out\"\n                  :box-shadow (if has-error? \n                                \"0 0 0 3px rgba(220, 53, 69, 0.1)\" \n                                \"0 1px 2px 0 rgba(0, 0, 0, 0.05)\")\n                  :outline \"none\"}\n                 (:style attrs)\n                 {:focus {:border-color (if has-error? \"#dc3545\" \"#3b82f6\")\n                         :box-shadow (if has-error? \n                                       \"0 0 0 3px rgba(220, 53, 69, 0.1)\"\n                                       \"0 0 0 3px rgba(59, 130, 246, 0.1)\")}})})\n\n(defn- render-textarea [field-key template has-error? attrs]\n  \"Render textarea input\"\n  [:textarea (merge (dissoc attrs :type) (input-base-props field-key template has-error? attrs))])\n\n(defn- render-text-input [field-key template has-error? attrs]\n  \"Render text input\"\n  [:input (merge attrs (input-base-props field-key template has-error? attrs))])\n\n(defn- field-input [field-key template has-error? attrs]\n  \"Render appropriate input type\"\n  (if (= (:type attrs) \"textarea\")\n    (render-textarea field-key template has-error? attrs)\n    (render-text-input field-key template has-error? attrs)))\n\n(defn- field-error [error-msg]\n  (when error-msg\n    [:div {:style {:color \"#dc3545\" :font-size \"0.875rem\" :margin-top \"0.25rem\"}}\n     error-msg]))\n\n(defn- form-field [label field-key template errors attrs]\n  \"Complete form field with label, input and error\"\n  (let [has-error? (contains? errors field-key)]\n    [:div {:style {:margin-bottom \"1.5rem\"}}\n     [field-label label field-key has-error?]\n     [field-input field-key template has-error? attrs]\n     [field-error (get errors field-key)]]))\n\n(defn- modal-overlay []\n  \"Modal overlay background\"\n  {:position \"fixed\" :top 0 :left 0 :right 0 :bottom 0\n   :background \"rgba(0, 0, 0, 0.6)\" :z-index 1000\n   :display \"flex\" :align-items \"center\" :justify-content \"center\"\n   :backdrop-filter \"blur(4px)\"\n   :animation \"fadeIn 0.2s ease-out\"})\n\n(defn- modal-content []\n  \"Modal content container styles\"\n  {:background \"white\" :padding \"2rem\" :border-radius \"16px\"\n   :min-width \"480px\" :max-width \"640px\" :max-height \"90vh\" :overflow \"auto\"\n   :box-shadow \"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)\"\n   :transform \"scale(1)\" :animation \"slideIn 0.2s ease-out\"})\n\n(defn- modal-title [is-new?]\n  \"Modal title based on create/edit mode\"\n  [:div {:style {:margin-bottom \"2rem\" :padding-bottom \"1rem\" :border-bottom \"1px solid #e5e7eb\"}}\n   [:h3 {:style {:font-size \"1.5rem\" :font-weight \"600\" :color \"#111827\" :margin \"0\"}}\n    (if is-new? \"Add New Material Template\" \"Edit Material Template\")]\n   [:p {:style {:color \"#6b7280\" :font-size \"0.875rem\" :margin \"0.5rem 0 0 0\"}}\n    (if is-new? \n      \"Create a new material template for your workspace\"\n      \"Update the details of this material template\")]])\n\n(defn- form-fields [template errors]\n  \"All form input fields\"\n  [:div\n   [form-field \"Name\" :material-template/name template errors\n    {:type \"text\" :placeholder \"e.g. Steel Cable\"}]\n   [form-field \"Unit\" :material-template/unit template errors\n    {:type \"text\" :placeholder \"e.g. m, kg, pcs\"}]\n   [form-field \"Category\" :material-template/category template errors\n    {:type \"text\" :placeholder \"e.g. Cables, Hardware\"}]\n   [form-field \"Description\" :material-template/description template errors\n    {:type \"textarea\" :placeholder \"Optional description\" :rows 3}]])\n\n(defn- active-checkbox [template is-new?]\n  \"Active status checkbox for existing templates\"\n  (when-not is-new?\n    [:div {:style {:margin-bottom \"1.5rem\" :padding \"1rem\" :background \"#f9fafb\" \n                   :border \"1px solid #e5e7eb\" :border-radius \"8px\"}}\n     [:label {:style {:display \"flex\" :align-items \"center\" :font-weight \"600\" \n                      :color \"#374151\" :cursor \"pointer\"}}\n      [:input {:type \"checkbox\"\n               :checked (boolean (:material-template/active @template))\n               :on-change #(swap! template assoc :material-template/active (.. % -target -checked))\n               :style {:margin-right \"0.75rem\" :width \"1rem\" :height \"1rem\" \n                       :accent-color \"#3b82f6\" :cursor \"pointer\"}}]\n      \"Active Template\"\n      [:span {:style {:color \"#6b7280\" :font-weight \"normal\" :margin-left \"0.5rem\"}}\n       \"(Uncheck to disable this template)\"]]]))\n\n(defn- handle-save-click [template loading? errors on-save]\n  \"Handle save button click with validation\"\n  (let [validation-errors (validate-material-template @template)]\n    (if (empty? validation-errors)\n      (do (reset! loading? true)\n          (reset! errors {})\n          (on-save @template (fn [] (reset! loading? false))))\n      (reset! errors validation-errors))))\n\n(defn- modal-buttons [template loading? errors on-save on-cancel]\n  \"Save and Cancel buttons\"\n  [:div {:style {:display \"flex\" :gap \"0.75rem\" :margin-top \"2.5rem\" :padding-top \"2rem\"\n                 :border-top \"1px solid #e5e7eb\" :justify-content \"flex-end\"}}\n   [:button {:type \"button\" :on-click on-cancel\n             :style {:padding \"0.75rem 1.5rem\" :background \"white\" :color \"#374151\"\n                     :border \"1px solid #d1d5db\" :border-radius \"8px\" :cursor \"pointer\"\n                     :font-weight \"500\" :transition \"all 0.2s ease-in-out\"\n                     :hover {:background \"#f9fafb\" :border-color \"#9ca3af\"}}}\n    \"Cancel\"]\n   [:button {:type \"button\" :disabled @loading?\n             :on-click #(handle-save-click template loading? errors on-save)\n             :style {:padding \"0.75rem 1.5rem\" \n                     :background (if @loading? \"#9ca3af\" \"#3b82f6\") \n                     :color \"white\" :border \"none\" :border-radius \"8px\" \n                     :cursor (if @loading? \"not-allowed\" \"pointer\")\n                     :font-weight \"500\" :transition \"all 0.2s ease-in-out\"\n                     :opacity (if @loading? 0.7 1)\n                     :hover (when-not @loading? {:background \"#2563eb\"})}}\n    (if @loading? \"Saving...\" \"Save Template\")]])\n\n(defn material-template-modal\n  \"Modal for creating/editing material templates\"\n  [template-data is-new? on-save on-cancel]\n  (let [loading? (r/atom false)\n        errors (r/atom {})\n        template (r/atom template-data)]\n    (fn [template-data is-new? on-save on-cancel]\n      (reset! template template-data)\n      [:div {:style (modal-overlay)}\n       [:div {:style (modal-content)}\n        [modal-title is-new?]\n        [form-fields template @errors]\n        [active-checkbox template is-new?]\n        [modal-buttons template loading? errors on-save on-cancel]]])))\n\n(defn- table-header-style []\n  {:padding \"1rem 1.25rem\" :text-align \"left\" :font-weight \"600\" \n   :font-size \"0.75rem\" :letter-spacing \"0.05em\" :text-transform \"uppercase\"\n   :color \"#374151\" :background \"#f9fafb\" :border-bottom \"1px solid #e5e7eb\"})\n\n(defn- table-cell-style []\n  {:padding \"1rem 1.25rem\" :border-bottom \"1px solid #f3f4f6\" :vertical-align \"top\"})\n\n(defn- template-name-cell [template]\n  [:td {:style (table-cell-style)}\n   [:div \n    [:div {:style {:font-weight \"600\" :color \"#111827\" :font-size \"0.875rem\"}}\n     (:material-template/name template)]\n    (when (:material-template/description template)\n      [:div {:style {:color \"#6b7280\" :font-size \"0.75rem\" :margin-top \"0.25rem\" :line-height \"1.4\"}}\n       (:material-template/description template)])]])\n\n(defn material-template-table\n  \"Table displaying material templates\"\n  [templates on-edit on-delete]\n  [:div {:style {:background \"white\" :border-radius \"12px\" :overflow \"hidden\"\n                 :box-shadow \"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)\"\n                 :border \"1px solid #e5e7eb\"}}\n   [:table {:style {:width \"100%\" :border-collapse \"collapse\"}}\n    [:thead\n     [:tr\n      [:th {:style (table-header-style)} \"Material\"]\n      [:th {:style (table-header-style)} \"Unit\"]\n      [:th {:style (table-header-style)} \"Category\"]\n      [:th {:style (table-header-style)} \"Status\"]\n      [:th {:style (merge (table-header-style) {:text-align \"center\"})} \"Actions\"]]]\n    [:tbody\n     (for [template templates]\n       ^{:key (:material-template/id template)}\n       [:tr {:style {:transition \"background-color 0.15s ease-in-out\"\n                     :hover {:background \"#f9fafb\"}}}\n        [template-name-cell template]\n        [:td {:style (merge (table-cell-style) {:color \"#374151\" :font-weight \"500\" :font-size \"0.875rem\"})}\n         (:material-template/unit template)]\n        [:td {:style (merge (table-cell-style) {:color \"#6b7280\" :font-size \"0.875rem\"})}\n         (or (:material-template/category template) \n             [:span {:style {:color \"#9ca3af\" :font-style \"italic\"}} \"No category\"])]\n        [:td {:style (table-cell-style)}\n         [:span {:style {:padding \"0.25rem 0.75rem\" :border-radius \"9999px\" :font-size \"0.75rem\" :font-weight \"500\"\n                         :background (if (:material-template/active template) \"#dcfce7\" \"#fee2e2\")\n                         :color (if (:material-template/active template) \"#166534\" \"#dc2626\")}}\n          (if (:material-template/active template) \"Active\" \"Inactive\")]]\n        [:td {:style (merge (table-cell-style) {:text-align \"center\"})}\n         [:div {:style {:display \"flex\" :gap \"0.5rem\" :justify-content \"center\"}}\n          [:button {:type \"button\"\n                    :on-click #(on-edit template)\n                    :style {:padding \"0.5rem 0.75rem\" :background \"#f3f4f6\" :color \"#374151\"\n                            :border \"1px solid #d1d5db\" :border-radius \"6px\" :cursor \"pointer\"\n                            :font-size \"0.75rem\" :font-weight \"500\" :transition \"all 0.15s ease-in-out\"\n                            :hover {:background \"#e5e7eb\" :border-color \"#9ca3af\"}}}\n           \"Edit\"]\n          [:button {:type \"button\"\n                    :on-click (fn [] (when (js/confirm \"Are you sure you want to delete this template?\")\n                                      (on-delete (:material-template/id template))))\n                    :style {:padding \"0.5rem 0.75rem\" :background \"#fef2f2\" :color \"#dc2626\"\n                            :border \"1px solid #fecaca\" :border-radius \"6px\" :cursor \"pointer\"\n                            :font-size \"0.75rem\" :font-weight \"500\" :transition \"all 0.15s ease-in-out\"\n                            :hover {:background \"#fee2e2\" :border-color \"#fca5a5\"}}}\n           \"Delete\"]]]])]]])\n\n(defn- page-header [modal-template modal-is-new?]\n  \"Page header with title and add button\"\n  [:div {:style {:display \"flex\" :justify-content \"space-between\" :align-items \"center\"\n                 :margin-bottom \"2rem\" :padding-bottom \"1.5rem\" :border-bottom \"1px solid #e5e7eb\"}}\n   [:div\n    [:h1 {:style {:font-size \"1.875rem\" :font-weight \"700\" :color \"#111827\" :margin \"0\"}}\n     \"Material Templates\"]\n    [:p {:style {:color \"#6b7280\" :font-size \"0.875rem\" :margin \"0.5rem 0 0 0\"}}\n     \"Manage your material templates for this workspace\"]]\n   [:button {:type \"button\"\n             :on-click (fn [] \n                        (reset! modal-template {:material-template/active true})\n                        (reset! modal-is-new? true))\n             :style {:padding \"0.75rem 1.25rem\" :background \"#10b981\" :color \"white\"\n                     :border \"none\" :border-radius \"8px\" :cursor \"pointer\"\n                     :font-weight \"600\" :font-size \"0.875rem\" :letter-spacing \"0.025em\"\n                     :transition \"all 0.2s ease-in-out\" :box-shadow \"0 1px 2px 0 rgba(0, 0, 0, 0.05)\"\n                     :hover {:background \"#059669\" :box-shadow \"0 4px 6px -1px rgba(0, 0, 0, 0.1)\"}}}\n    \"+ Add New Template\"]])\n\n(defn- templates-content [templates loading? modal-template modal-is-new? delete-template]\n  \"Main content area with loading or table\"\n  (if @loading?\n    [:div {:style {:display \"flex\" :justify-content \"center\" :align-items \"center\" \n                   :padding \"4rem\" :background \"white\" :border-radius \"12px\"\n                   :box-shadow \"0 1px 3px 0 rgba(0, 0, 0, 0.1)\"}}\n     [:div {:style {:text-align \"center\"}}\n      [:div {:style {:width \"40px\" :height \"40px\" :border \"4px solid #f3f4f6\" \n                     :border-top \"4px solid #3b82f6\" :border-radius \"50%\"\n                     :animation \"spin 1s linear infinite\" :margin \"0 auto 1rem\"}}]\n      [:div {:style {:color \"#6b7280\" :font-weight \"500\"}} \"Loading templates...\"]]]\n    (if (empty? @templates)\n      [:div {:style {:text-align \"center\" :padding \"4rem\" :background \"white\" \n                     :border-radius \"12px\" :box-shadow \"0 1px 3px 0 rgba(0, 0, 0, 0.1)\"}}\n       [:div {:style {:color \"#9ca3af\" :font-size \"1.125rem\" :font-weight \"500\"}}\n        \"No material templates found\"]\n       [:div {:style {:color \"#6b7280\" :font-size \"0.875rem\" :margin-top \"0.5rem\"}}\n        \"Create your first material template to get started\"]]\n      [material-template-table @templates\n       (fn [template]\n         (reset! modal-template template)\n         (reset! modal-is-new? false))\n       delete-template])))\n\n(defn- modal-when-open [modal-template modal-is-new? save-template]\n  \"Render modal when template is selected\"\n  (when @modal-template\n    [material-template-modal @modal-template @modal-is-new? save-template\n     (fn [] (reset! modal-template nil))]))\n\n(defn view []\n  (let [authenticated? (r/atom nil)  ; nil = checking, true = authenticated, false = not authenticated\n        workspace-id (get-workspace-id)\n        templates (r/atom [])\n        loading? (r/atom false)\n        modal-template (r/atom nil)\n        modal-is-new? (r/atom false)\n        \n        load-templates (fn []\n                        (reset! loading? true)\n                        (load-templates-query workspace-id loading? templates))\n        \n        save-template (fn [template callback]\n                       (save-template-query template workspace-id modal-is-new? \n                                          callback modal-template load-templates))\n        \n        delete-template (fn [template-id]\n                         (delete-template-query template-id workspace-id load-templates))]\n    \n    (fn []\n      ;; Call useEffect hook inside the render function\n      (zero-react/use-effect\n        {:mount (fn [] \n                  ;; Check authentication first\n                  (parquery/send-queries\n                   {:queries {:user/current {}}\n                    :parquery/context {}\n                    :callback (fn [response]\n                               (let [user (:user/current response)]\n                                 (if (and user (:user/id user))\n                                   (do \n                                     (reset! authenticated? true)\n                                     ;; Load templates after authentication is confirmed\n                                     (when (empty? @templates) (load-templates)))\n                                   (reset! authenticated? false))))}))\n         :params #js[]})\n      \n      (cond\n        (nil? @authenticated?)\n        [:div {:style {:padding \"2rem\" :text-align \"center\"}}\n         [:div \"Checking authentication...\"]]\n        \n        (false? @authenticated?)\n        (do \n          (println \"User not authenticated, redirecting to login\")\n          (set! (.-location js/window) \"/login\")\n          [:div])\n        \n        :else\n        [:div {:style {:min-height \"100vh\" :background \"#f9fafb\"}}\n         [:div {:style {:max-width \"1200px\" :margin \"0 auto\" :padding \"2rem\"}}\n          [page-header modal-template modal-is-new?]\n          [templates-content templates loading? modal-template modal-is-new? delete-template]\n          [modal-when-open modal-template modal-is-new? save-template]]]))))"]}
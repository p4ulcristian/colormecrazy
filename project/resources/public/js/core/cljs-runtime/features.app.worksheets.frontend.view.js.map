{"version":3,"sources":["features/app/worksheets/frontend/view.cljs"],"mappings":"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","names":["features.app.worksheets.frontend.view/get-workspace-id","cljs.core/deref","router-state","router.frontend.zero/state","workspace-id","cljs.core.get_in","features.app.worksheets.frontend.view/load-worksheets-query","params","worksheets-data","loading?","cljs.core/reset!","parquery.frontend.request/send-queries","or__5025__auto__","response","result","features.app.worksheets.frontend.view/save-worksheet-query","worksheet","modal-is-new?","callback","modal-worksheet","load-worksheets","is-new?","query-type","worksheet-data","cljs.core.dissoc","context","cljs.core.get","G__35986","js/alert","features.app.worksheets.frontend.view/delete-worksheet-query","worksheet-id","features.app.worksheets.frontend.view/validate-serial-number","serial-number","clojure.string/trim","features.app.worksheets.frontend.view/validate-work-description","work-description","features.app.worksheets.frontend.view/validate-worksheet","errors","work-type","service-type","status","G__35987","cljs.core.assoc","cljs.core/empty?","features.app.worksheets.frontend.view/calculate-work-duration","arrival-time","departure-time","and__5023__auto__","e35988","arrival","js/Date","departure","diff-ms","diff-hours","Math/ceil","js/Error","e","cljs.core.println","features.app.worksheets.frontend.view/field-label","label","field-key","has-error?","fexpr__36002","features.app.worksheets.frontend.view/format-datetime-for-input","iso-datetime","e36016","date","year","month","day","hours","minutes","features.app.worksheets.frontend.view/input-base-props","attrs","is-time-field?","fexpr__36044","form-data-sub","G__36045","zero.frontend.re-frame/subscribe","form-data","field-value","display-value","cljs.core._EQ_","base-change-handler","value","G__36049","zero.frontend.re-frame/dispatch","updated-data","calculated-duration","G__36053","cljs.core.merge","features.app.worksheets.frontend.view/render-textarea","features.app.worksheets.frontend.view/render-text-input","features.app.worksheets.frontend.view/render-select","options","iter__5503__auto__","s__36064","cljs.core/LazySeq","temp__5823__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__5501__auto__","size__5502__auto__","cljs.core/count","b__36066","cljs.core/chunk-buffer","i__36065","vec__36069","cljs.core/-nth","cljs.core.nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__36063","cljs.core/chunk-rest","vec__36073","cljs.core/first","cljs.core/cons","cljs.core/rest","features.app.worksheets.frontend.view/render-address-select","addresses","reagent.core.atom","addr-list","s__36087","b__36089","i__36088","iter__36086","address","features.app.worksheets.frontend.view/field-input","features.app.worksheets.frontend.view/field-error","error-msg","features.app.worksheets.frontend.view/form-field","cljs.core/contains?","features.app.worksheets.frontend.view/form-fields","errors-sub","G__36146","features.app.worksheets.frontend.view/handle-save-click","on-save","G__36166","validation-errors","G__36167","G__36168","G__36170","G__36171","G__36172","G__36173","features.app.worksheets.frontend.view/modal-close-handler","on-cancel","G__36177","features.app.worksheets.frontend.view/modal-header-config","translations.core/tr","features.app.worksheets.frontend.view/basic-form-fields","features.app.worksheets.frontend.view/address-form-field","G__36186","features.app.worksheets.frontend.view/work-info-form-fields","features.app.worksheets.frontend.view/time-tracking-form-fields","features.app.worksheets.frontend.view/notes-form-field","features.app.worksheets.frontend.view/material-item-display","idx","material","G__36243","features.app.worksheets.frontend.view/existing-materials-list","materials","cljs.core.map_indexed","p1__36272#","p1__36274#","features.app.worksheets.frontend.view/template-material-selector","material-templates","selected-template-id","G__36280","cljs.core.map","template","cljs.core.sort_by","G__36283","G__36284","G__36285","G__36288","G__36293","G__36303","p1__36330#","p1__36334#","p1__36335#","features.app.worksheets.frontend.view/custom-material-inputs","G__36348","G__36351","G__36357","G__36358","G__36362","G__36363","G__36364","G__36366","G__36370","G__36380","G__36386","G__36393","G__36395","G__36399","G__36403","G__36405","features.app.worksheets.frontend.view/materials-section","G__36409","G__36410","G__36412","features.app.worksheets.frontend.view/signature-display","ref-dispatch-key","G__36418","signature-data","cljs.core/boolean","G__36419","features.app.worksheets.frontend.view/signature-canvas","js/shadow.js.shim.module$react_signature_canvas.default","ref","G__36427","features.app.worksheets.frontend.view/signature-clear-buttons","G__36428","G__36429","features.app.worksheets.frontend.view/signature-zoom-overlay","zoom-data","G__36431","G__36432","G__36447","js/window.innerWidth","G__36452","G__36454","G__36455","G__36456","features.app.worksheets.frontend.view/signatures-section","features.app.worksheets.frontend.view/save-button-click-handler","G__36473","maintainer-signature","customer-signature","cljs.core/keys","G__36480","G__36483","G__36484","G__36485","G__36486","G__36489","features.app.worksheets.frontend.view/modal-footer-buttons","ui.modal/modal-footer","ui.enhanced-button/enhanced-button","G__36490","G__36495","G__36498","features.app.worksheets.frontend.view/worksheet-modal","cljs.core/type","G__36513","G__36518","G__36519","G__36522","ui.modal/modal","ui.modal/modal-header","G__36530","features.app.worksheets.frontend.view/worksheet-serial-render","row","features.app.worksheets.frontend.view/work-type-render","features.app.worksheets.frontend.view/status-render","status-colors","colors","clojure.string/replace","features.app.worksheets.frontend.view/address-render","address-name","features.app.worksheets.frontend.view/assigned-to-render","assigned-to-name","G__36545","G__36546","zero.frontend.re-frame/reg-sub","db","_","G__36547","G__36548","G__36552","G__36553","G__36554","G__36555","G__36556","G__36557","G__36558","G__36559","zero.frontend.re-frame/reg-event-db","p__36560","vec__36561","cljs.core/assoc-in","G__36564","G__36565","p__36566","vec__36567","data","G__36574","G__36575","p__36576","vec__36577","G__36580","G__36581","p__36582","vec__36583","G__36586","G__36587","p__36588","vec__36589","authenticated?","G__36592","G__36593","G__36594","G__36595","G__36596","G__36597","G__36598","G__36599","G__36600","G__36601","p__36602","vec__36603","enhanced-data","G__36606","G__36607","p__36608","vec__36609","G__36612","G__36613","p__36614","vec__36615","G__36618","G__36619","p__36620","vec__36621","G__36624","G__36625","p__36626","vec__36627","G__36630","G__36631","p__36632","vec__36633","G__36636","G__36637","G__36638","G__36639","p__36640","vec__36641","G__36644","G__36645","p__36646","vec__36647","G__36650","G__36651","G__36652","G__36653","G__36654","G__36655","G__36656","G__36657","G__36658","G__36659","p__36660","vec__36661","G__36664","G__36665","zero.frontend.re-frame/reg-event-fx","p__36666","map__36667","cljs.core/--destructure-map","zoom-ref","new-db","cljs.core/not","signature-key","G__36668","G__36669","p__36670","vec__36671","G__36674","G__36675","G__36676","G__36677","p__36678","vec__36679","G__36682","G__36683","G__36684","p__36685","vec__36686","templates","G__36689","G__36690","p__36691","vec__36692","G__36695","G__36696","p__36697","vec__36698","template-id","G__36702","G__36703","quantity","selected-template","p1__36701#","cljs.core.filter","new-material","current-materials","cljs.core.conj","G__36704","G__36705","p__36706","vec__36707","cljs.core/vec","cljs.core.concat","cljs.core.take","cljs.core.drop","G__36710","G__36711","custom-name","custom-unit","custom-quantity","G__36712","G__36713","user","G__36714","G__36715","G__36716","features.app.worksheets.frontend.view/view","save-worksheet","delete-worksheet","ui.page-header/page-header","ui.data-table/server-side-data-table","pdf-url","js/window.open","js/confirm","cljs.core/chunk-first"],"sourcesContent":["(ns features.app.worksheets.frontend.view\n  (:require [reagent.core :as r]\n            [clojure.string :as str]\n            [parquery.frontend.request :as parquery]\n            [router.frontend.zero :as router]\n            [zero.frontend.re-frame :as rf]\n            [zero.frontend.react :as zero-react]\n            [ui.modal :as modal]\n            [ui.form-field :as form-field]\n            [ui.data-table :as data-table]\n            [ui.enhanced-button :as enhanced-button]\n            [ui.page-header :as page-header]\n            [ui.address-search :as address-search]\n            [translations.core :as tr]\n            [\"react-signature-canvas\" :default SignatureCanvas]))\n\n(defn- get-workspace-id\n  \"Get workspace ID from router parameters\"\n  []\n  (let [router-state @router/state\n        workspace-id (get-in router-state [:parameters :path :workspace-id])]\n      workspace-id))\n\n(defn- load-worksheets-query\n  \"Execute ParQuery to load worksheets with pagination\"\n  [workspace-id params worksheets-data loading?]\n  (reset! loading? true)\n  (parquery/send-queries\n   {:queries {:workspace-worksheets/get-paginated (or params {})}\n    :parquery/context {:workspace-id workspace-id}\n    :callback (fn [response]\n               (reset! loading? false)\n               (let [result (:workspace-worksheets/get-paginated response)]\n                 (reset! worksheets-data result)))}))\n\n\n(defn- save-worksheet-query\n  \"Execute ParQuery to save worksheet\"\n  [worksheet workspace-id modal-is-new? callback modal-worksheet load-worksheets]\n  (let [is-new? @modal-is-new?\n        query-type (if is-new? :workspace-worksheets/create :workspace-worksheets/update)\n        worksheet-data (if is-new? (dissoc worksheet :worksheet/id) worksheet)\n        context {:workspace-id workspace-id}]\n    (parquery/send-queries\n     {:queries {query-type worksheet-data}\n      :parquery/context context\n      :callback (fn [response]\n                 (callback)\n                 (if (:success (get response query-type))\n                   (do (reset! modal-worksheet nil)\n                       (load-worksheets {}))\n                   (js/alert (str \"Error: \" (:error (get response query-type))))))})))\n\n(defn- delete-worksheet-query\n  \"Execute ParQuery to delete worksheet\"\n  [worksheet-id workspace-id load-worksheets]\n  (parquery/send-queries\n   {:queries {:workspace-worksheets/delete {:worksheet/id worksheet-id}}\n    :parquery/context {:workspace-id workspace-id}\n    :callback (fn [response]\n               (if (:success (:workspace-worksheets/delete response))\n                 (load-worksheets)\n                 (js/alert \"Error deleting worksheet\")))}))\n\n(defn- validate-serial-number\n  \"Validate worksheet serial number\"\n  [serial-number]\n  (< (count (str/trim (str serial-number))) 2))\n\n(defn- validate-work-description\n  \"Validate work description\"\n  [work-description]\n  (< (count (str/trim (str work-description))) 5))\n\n(defn validate-worksheet\n  \"Validates worksheet data and returns map of field errors\"\n  [worksheet]\n  (let [errors {}\n        serial-number (:worksheet/serial-number worksheet)\n        work-description (:worksheet/work-description worksheet)\n        work-type (:worksheet/work-type worksheet)\n        service-type (:worksheet/service-type worksheet)\n        status (:worksheet/status worksheet)]\n    (cond-> errors\n      (validate-work-description work-description) (assoc :worksheet/work-description \"Work description is required (min 5 characters)\")\n      (empty? work-type) (assoc :worksheet/work-type \"Work type is required\")\n      (empty? service-type) (assoc :worksheet/service-type \"Service type is required\") \n      (empty? status) (assoc :worksheet/status \"Status is required\")\n      (empty? (:worksheet/address-id worksheet)) (assoc :worksheet/address-id \"Address is required\"))))\n\n(defn- calculate-work-duration\n  \"Calculate work duration in hours from arrival and departure times\"\n  [arrival-time departure-time]\n  (when (and arrival-time departure-time \n             (not (empty? arrival-time)) \n             (not (empty? departure-time)))\n    (try\n      (let [arrival (js/Date. arrival-time)\n            departure (js/Date. departure-time)]\n        (when (> (.getTime departure) (.getTime arrival))\n          (let [diff-ms (- (.getTime departure) (.getTime arrival))\n                diff-hours (/ diff-ms 1000 60 60)]\n            ;; Round up to nearest full hour\n            (Math/ceil diff-hours))))\n      (catch js/Error e\n        (println \"Error calculating duration:\" e)\n        nil))))\n\n\n(defn- field-label [label field-key has-error?]\n  [:label {:style {:display \"block\" :margin-bottom \"0.5rem\" :font-weight \"600\"\n                   :font-size \"0.875rem\" :letter-spacing \"0.025em\"\n                   :color (if has-error? \"#dc3545\" \"#374151\")}}\n   label \n   (when (#{:worksheet/work-description :worksheet/work-type :worksheet/service-type :worksheet/status} field-key) \n     [:span {:style {:color \"#ef4444\" :margin-left \"0.25rem\"}} \"*\"])])\n\n(defn- format-datetime-for-input\n  \"Convert ISO datetime string to datetime-local format (YYYY-MM-DDTHH:mm)\"\n  [iso-datetime]\n  (when (and iso-datetime (not (empty? iso-datetime)))\n    (try\n      (let [date (js/Date. iso-datetime)\n            year (.getFullYear date)\n            month (str (.padStart (str (inc (.getMonth date))) 2 \"0\"))\n            day (str (.padStart (str (.getDate date)) 2 \"0\"))\n            hours (str (.padStart (str (.getHours date)) 2 \"0\"))\n            minutes (str (.padStart (str (.getMinutes date)) 2 \"0\"))]\n        (str year \"-\" month \"-\" day \"T\" hours \":\" minutes))\n      (catch js/Error e\n        (println \"Error formatting datetime:\" e)\n        \"\"))))\n\n(defn- input-base-props\n  \"Base properties for input fields\"\n  [field-key has-error? attrs]\n  (let [is-time-field? (#{:worksheet/arrival-time :worksheet/departure-time} field-key)\n        form-data-sub @(rf/subscribe [:worksheets/modal-form-data])\n        form-data (or form-data-sub {})\n        field-value (get form-data field-key \"\")\n        display-value (if (and is-time-field? (= (:type attrs) \"datetime-local\"))\n                        (format-datetime-for-input field-value)\n                        (str field-value))]\n    (when (nil? form-data-sub)\n      (println \"WARNING: form-data subscription returned nil for field:\" field-key))\n    (let [base-change-handler (fn [e] \n                             (let [value (.. e -target -value)]\n                               (rf/dispatch [:worksheets/update-modal-form-field field-key value])\n                               (when is-time-field?\n                                 ;; Auto-calculate duration for time fields\n                                 (let [updated-data (assoc form-data field-key value)\n                                       arrival (:worksheet/arrival-time updated-data)\n                                       departure (:worksheet/departure-time updated-data)\n                                       calculated-duration (calculate-work-duration arrival departure)]\n                                   (when calculated-duration\n                                     (rf/dispatch [:worksheets/update-modal-form-field :worksheet/work-duration-hours calculated-duration]))))))]\n    {:value display-value\n     :on-change base-change-handler\n     :style (merge {:width \"100%\"\n                    :padding \"0.75rem 1rem\"\n                    :border (if has-error? \"2px solid #dc3545\" \"1px solid #d1d5db\")\n                    :border-radius \"8px\"\n                    :font-size \"1rem\"\n                    :line-height \"1.5\"\n                    :transition \"border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out\"\n                    :box-shadow (if has-error? \n                                  \"0 0 0 3px rgba(220, 53, 69, 0.1)\" \n                                  \"0 1px 2px 0 rgba(0, 0, 0, 0.05)\")\n                    :outline \"none\"\n                    :background (when (:disabled attrs) \"#f9fafb\")\n                    :cursor (when (:disabled attrs) \"not-allowed\")}\n                   (:style attrs)\n                   {:focus {:border-color (if has-error? \"#dc3545\" \"#3b82f6\")\n                           :box-shadow (if has-error? \n                                         \"0 0 0 3px rgba(220, 53, 69, 0.1)\"\n                                         \"0 0 0 3px rgba(59, 130, 246, 0.1)\")}})})))\n\n(defn- render-textarea\n  \"Render textarea input\"\n  [field-key has-error? attrs]\n  [:textarea (merge (input-base-props field-key has-error? attrs) (dissoc attrs :type))])\n\n(defn- render-text-input\n  \"Render text input\"\n  [field-key has-error? attrs]\n  [:input (merge (input-base-props field-key has-error? attrs) attrs)])\n\n(defn- render-select\n  \"Render select input\"\n  [field-key has-error? attrs options]\n  [:select (merge (input-base-props field-key has-error? attrs) (dissoc attrs :options))\n   [:option {:value \"\"} \"Select...\"]\n   (for [[value label] options]\n     ^{:key value}\n     [:option {:value value} label])])\n\n(defn- render-address-select\n  \"Render address dropdown that loads addresses from workspace\"\n  [field-key has-error? attrs]\n  (let [workspace-id (:workspace-id attrs)\n        addresses (r/atom [])\n        loading? (r/atom false)]\n    \n    ;; Load addresses when component mounts\n    (when workspace-id\n      (reset! loading? true)\n      (parquery/send-queries\n        {:queries {:workspace-addresses/get-all {:workspace-id workspace-id}}\n         :parquery/context {:workspace-id workspace-id}\n         :callback (fn [response]\n                     (reset! loading? false)\n                     (let [addr-list (:workspace-addresses/get-all response [])]\n                       (println \"DEBUG: Loaded addresses:\" (count addr-list))\n                       (reset! addresses addr-list)))}))\n    \n    (fn [field-key has-error? attrs]\n      [:select (merge (input-base-props field-key has-error? attrs) \n                      (dissoc attrs :workspace-id :current-value))\n       [:option {:value \"\"} \n        (if @loading? \"Loading addresses...\" \"Select address...\")]\n       (for [address @addresses]\n         ^{:key (:address/id address)}\n         [:option {:value (:address/id address)} \n          (:address/name address)])])))\n\n(defn- field-input\n  \"Render appropriate input type\"\n  [field-key has-error? attrs]\n  (cond\n    (= (:type attrs) \"textarea\") (render-textarea field-key has-error? attrs)\n    (= (:type attrs) \"select\") (render-select field-key has-error? attrs (:options attrs))\n    (= (:type attrs) \"address-select\") [render-address-select field-key has-error? attrs]\n    :else (render-text-input field-key has-error? attrs)))\n\n(defn- field-error [error-msg]\n  (when error-msg\n    [:div {:style {:color \"#dc3545\" :font-size \"0.875rem\" :margin-top \"0.25rem\"}}\n     error-msg]))\n\n(defn- form-field\n  \"Complete form field with label, input and error\"\n  [label field-key errors attrs]\n  (let [has-error? (contains? errors field-key)]\n    [:div {:style {:margin-bottom \"1.5rem\"}}\n     [field-label label field-key has-error?]\n     [field-input field-key has-error? attrs]\n     [field-error (get errors field-key)]]))\n\n(defn- form-fields\n  \"All form input fields\"\n  []\n  (let [errors-sub @(rf/subscribe [:worksheets/modal-form-errors])\n        errors (or errors-sub {})]\n    (println \"form-fields called, errors-sub:\" errors-sub \"errors:\" errors)\n    [:div\n     [form-field \"Serial Number\" :worksheet/serial-number errors\n      {:type \"text\" :placeholder \"Auto-generated\" :disabled true}]\n     [form-field \"Creation Date\" :worksheet/creation-date errors\n      {:type \"date\"}]\n     \n     ;; Address search field - using the working version below in modal-form-content\n         \n     [form-field \"Work Type\" :worksheet/work-type errors\n      {:type \"select\" :options [[\"repair\" \"Repair\"] [\"maintenance\" \"Maintenance\"] [\"other\" \"Other\"]]}]\n     [form-field \"Service Type\" :worksheet/service-type errors\n      {:type \"select\" :options [[\"normal\" \"Normal\"] [\"night\" \"Night\"] [\"weekend\" \"Weekend\"] [\"holiday\" \"Holiday\"]]}]\n     [form-field \"Work Description\" :worksheet/work-description errors\n      {:type \"textarea\" :placeholder \"Describe the work to be performed...\" :rows 4}]\n     [form-field \"Status\" :worksheet/status errors\n      {:type \"select\" :options [[\"draft\" \"Draft\"] [\"in_progress\" \"In Progress\"] [\"completed\" \"Completed\"] [\"cancelled\" \"Cancelled\"]]}]\n     [form-field \"Arrival Time\" :worksheet/arrival-time errors\n      {:type \"datetime-local\"}]\n     [form-field \"Departure Time\" :worksheet/departure-time errors\n      {:type \"datetime-local\"}]\n     [form-field \"Work Duration (Hours)\" :worksheet/work-duration-hours errors\n      {:type \"number\" :step \"1\" :placeholder \"Auto-calculated from arrival/departure\" :disabled true}]\n     [:div {:style {:margin-bottom \"1.5rem\" :font-size \"0.75rem\" :color \"#6b7280\"}}\n      \"\ud83d\udca1 Work duration is automatically calculated from arrival and departure times (rounded up to nearest full hour)\"]\n     [form-field \"Notes\" :worksheet/notes errors\n      {:type \"textarea\" :placeholder \"Optional notes...\" :rows 3}]]))\n\n(defn- handle-save-click\n  \"Handle save button click with validation\"\n  [on-save]\n  (let [form-data @(rf/subscribe [:worksheets/modal-form-data])\n        validation-errors (validate-worksheet form-data)]\n    (if (empty? validation-errors)\n      (do\n          (rf/dispatch [:worksheets/set-modal-form-loading true])\n          (rf/dispatch [:worksheets/set-modal-form-errors {}])\n          (on-save form-data (fn [] \n                              (rf/dispatch [:worksheets/set-modal-form-loading false]))))\n      (do\n          (rf/dispatch [:worksheets/set-modal-form-errors validation-errors])))))\n\n(defn- modal-close-handler\n  \"Handle modal close event\"\n  [on-cancel]\n  (fn []\n    (println \"Modal closing...\")\n    (rf/dispatch [:worksheets/clear-modal-form])\n    (when on-cancel (on-cancel))))\n\n(defn- modal-header-config\n  \"Generate modal header configuration\"\n  [is-new?]\n  {:title (if is-new? (tr/tr :worksheets/modal-add-title) (tr/tr :worksheets/modal-edit-title))\n   :subtitle (if is-new? (tr/tr :worksheets/modal-add-subtitle) (tr/tr :worksheets/modal-edit-subtitle))})\n\n(defn- basic-form-fields\n  \"Render basic worksheet form fields\"\n  [errors]\n  [:div\n   [form-field \"Serial Number\" :worksheet/serial-number errors\n    {:type \"text\" :placeholder \"Auto-generated\" :disabled true}]\n   [form-field \"Creation Date\" :worksheet/creation-date errors\n    {:type \"date\"}]])\n\n(defn- address-form-field\n  \"Render address selection field\"\n  [errors]\n  (let [form-data @(rf/subscribe [:worksheets/modal-form-data])\n        workspace-id (get-workspace-id)]\n    [form-field \"Address\" :worksheet/address-id errors\n     {:type \"address-select\"\n      :workspace-id workspace-id\n      :current-value (:worksheet/address-id form-data)}]))\n\n(defn- work-info-form-fields\n  \"Render work information form fields\"\n  [errors]\n  [:div\n   [form-field \"Work Type\" :worksheet/work-type errors\n    {:type \"select\" :options [[\"repair\" \"Repair\"] [\"maintenance\" \"Maintenance\"] [\"other\" \"Other\"]]}]\n   [form-field \"Service Type\" :worksheet/service-type errors\n    {:type \"select\" :options [[\"normal\" \"Normal\"] [\"night\" \"Night\"] [\"weekend\" \"Weekend\"] [\"holiday\" \"Holiday\"]]}]\n   [form-field \"Work Description\" :worksheet/work-description errors\n    {:type \"textarea\" :placeholder \"Describe the work to be performed...\" :rows 4}]\n   [form-field \"Status\" :worksheet/status errors\n    {:type \"select\" :options [[\"draft\" \"Draft\"] [\"in_progress\" \"In Progress\"] [\"completed\" \"Completed\"] [\"cancelled\" \"Cancelled\"]]}]])\n\n(defn- time-tracking-form-fields\n  \"Render time tracking form fields\"\n  [errors]\n  [:div\n   [form-field \"Arrival Time\" :worksheet/arrival-time errors\n    {:type \"datetime-local\"}]\n   [form-field \"Departure Time\" :worksheet/departure-time errors\n    {:type \"datetime-local\"}]\n   [form-field \"Work Duration (Hours)\" :worksheet/work-duration-hours errors\n    {:type \"number\" :step \"1\" :placeholder \"Auto-calculated from arrival/departure\" :disabled true}]\n   [:div {:style {:margin-bottom \"1.5rem\" :font-size \"0.75rem\" :color \"#6b7280\"}}\n    \"\ud83d\udca1 Work duration is automatically calculated from arrival and departure times (rounded up to nearest full hour)\"]])\n\n(defn- notes-form-field\n  \"Render notes form field\"\n  [errors]\n  [form-field \"Notes\" :worksheet/notes errors\n   {:type \"textarea\" :placeholder \"Optional notes...\" :rows 3}])\n\n(defn- material-item-display\n  \"Render single material item with remove button\"\n  [idx material]\n  [:div {:key idx \n         :style {:display \"flex\" :justify-content \"space-between\" :align-items \"center\" :padding \"0.25rem 0\" :border-bottom \"1px solid #f3f4f6\"}}\n   [:span {:style {:font-size \"0.875rem\"}}\n    (str (:name material) \" - \" (:quantity material) \" \" (:unit material))]\n   [:button {:type \"button\"\n            :on-click #(rf/dispatch [:worksheets/remove-material idx])\n            :style {:background \"#ef4444\" :color \"white\" :border \"none\" :border-radius \"4px\" :padding \"0.25rem 0.5rem\" :font-size \"0.75rem\" :cursor \"pointer\"}}\n    \"Remove\"]])\n\n(defn- existing-materials-list\n  \"Render list of existing materials\"\n  [materials]\n  (when (seq materials)\n    [:div {:style {:margin-bottom \"1rem\"}}\n     [:h4 {:style {:margin-bottom \"0.5rem\" :font-size \"0.9rem\" :font-weight \"500\" :color \"#374151\"}}\n      \"Added Materials:\"]\n     [:div {:style {:max-height \"150px\" :overflow-y \"auto\" :border \"1px solid #d1d5db\" :border-radius \"6px\" :padding \"0.5rem\"}}\n      (map-indexed material-item-display materials)]]))\n\n(defn- template-material-selector\n  \"Render material template selection form\"\n  [material-templates selected-template-id]\n  [:div {:style {:display \"grid\" :grid-template-columns \"2fr 1fr auto\" :gap \"0.5rem\" :align-items \"end\"}}\n   [:div\n    [:label {:style {:display \"block\" :margin-bottom \"0.25rem\" :font-weight \"500\" :font-size \"0.75rem\" :color \"#374151\"}}\n     \"Select Material\"]\n    [:select {:value selected-template-id\n             :on-change #(rf/dispatch [:worksheets/select-material-template (.. % -target -value)])\n             :style {:width \"100%\" :padding \"0.5rem\" :border \"1px solid #d1d5db\" :border-radius \"6px\" :font-size \"0.875rem\"}}\n     [:option {:value \"\"} \"Choose material...\"]\n     (map (fn [template]\n            [:option {:key (:material-template/id template) :value (:material-template/id template)}\n             (str (:material-template/name template) \" (\" (:material-template/unit template) \")\")])\n          (sort-by :material-template/name material-templates))]]\n   [:div\n    [:label {:style {:display \"block\" :margin-bottom \"0.25rem\" :font-weight \"500\" :font-size \"0.75rem\" :color \"#374151\"}}\n     \"Quantity\"]\n    [:input {:type \"number\"\n            :value (get @(rf/subscribe [:worksheets/modal-form-data]) :worksheet/new-material-quantity \"\")\n            :on-change #(rf/dispatch [:worksheets/update-form-field :worksheet/new-material-quantity (.. % -target -value)])\n            :placeholder \"5\"\n            :disabled (empty? selected-template-id)\n            :style {:width \"100%\" :padding \"0.5rem\" :border \"1px solid #d1d5db\" :border-radius \"6px\" :font-size \"0.875rem\" :opacity (if (empty? selected-template-id) 0.5 1)}}]]\n   [:button {:type \"button\"\n            :on-click #(rf/dispatch [:worksheets/add-selected-material])\n            :disabled (or (empty? selected-template-id) \n                         (empty? (str (get @(rf/subscribe [:worksheets/modal-form-data]) :worksheet/new-material-quantity \"\"))))\n            :style {:background (if (or (empty? selected-template-id) \n                                       (empty? (str (get @(rf/subscribe [:worksheets/modal-form-data]) :worksheet/new-material-quantity \"\"))))\n                                 \"#9ca3af\" \"#10b981\")\n                   :color \"white\" :border \"none\" :border-radius \"6px\" :padding \"0.5rem 1rem\" :font-size \"0.875rem\" :cursor (if (or (empty? selected-template-id) \n                                                                                                                                    (empty? (str (get @(rf/subscribe [:worksheets/modal-form-data]) :worksheet/new-material-quantity \"\")))) \n                                                                                                                                \"not-allowed\" \"pointer\")\n                   :font-weight \"500\"}}\n    \"Add\"]])\n\n(defn- custom-material-inputs\n  \"Render custom material input form\"\n  []\n  [:div {:style {:margin-top \"1rem\" :padding-top \"1rem\" :border-top \"1px solid #e5e7eb\"}}\n   [:h4 {:style {:margin-bottom \"0.5rem\" :font-size \"0.9rem\" :font-weight \"500\" :color \"#374151\"}}\n    \"Add Custom Material:\"]\n   [:div {:style {:display \"grid\" :grid-template-columns \"2fr 1fr 1fr auto\" :gap \"0.5rem\" :align-items \"end\"}}\n    [:div\n     [:label {:style {:display \"block\" :margin-bottom \"0.25rem\" :font-weight \"500\" :font-size \"0.75rem\" :color \"#374151\"}}\n      \"Custom Material Name\"]\n     [:input {:type \"text\"\n             :value (get @(rf/subscribe [:worksheets/modal-form-data]) :worksheet/custom-material-name \"\")\n             :on-change #(rf/dispatch [:worksheets/update-form-field :worksheet/custom-material-name (.. % -target -value)])\n             :placeholder \"Enter material name...\"\n             :style {:width \"100%\" :padding \"0.5rem\" :border \"1px solid #d1d5db\" :border-radius \"6px\" :font-size \"0.875rem\"}}]]\n    [:div\n     [:label {:style {:display \"block\" :margin-bottom \"0.25rem\" :font-weight \"500\" :font-size \"0.75rem\" :color \"#374151\"}}\n      \"Unit\"]\n     [:input {:type \"text\"\n             :value (get @(rf/subscribe [:worksheets/modal-form-data]) :worksheet/custom-material-unit \"\")\n             :on-change #(rf/dispatch [:worksheets/update-form-field :worksheet/custom-material-unit (.. % -target -value)])\n             :placeholder \"pcs, kg, m...\"\n             :style {:width \"100%\" :padding \"0.5rem\" :border \"1px solid #d1d5db\" :border-radius \"6px\" :font-size \"0.875rem\"}}]]\n    [:div\n     [:label {:style {:display \"block\" :margin-bottom \"0.25rem\" :font-weight \"500\" :font-size \"0.75rem\" :color \"#374151\"}}\n      \"Quantity\"]\n     [:input {:type \"number\"\n             :value (get @(rf/subscribe [:worksheets/modal-form-data]) :worksheet/custom-material-quantity \"\")\n             :on-change #(rf/dispatch [:worksheets/update-form-field :worksheet/custom-material-quantity (.. % -target -value)])\n             :placeholder \"5\"\n             :style {:width \"100%\" :padding \"0.5rem\" :border \"1px solid #d1d5db\" :border-radius \"6px\" :font-size \"0.875rem\"}}]]\n    [:button {:type \"button\"\n             :on-click #(rf/dispatch [:worksheets/add-custom-material])\n             :disabled (or (empty? (str (get @(rf/subscribe [:worksheets/modal-form-data]) :worksheet/custom-material-name \"\")))\n                          (empty? (str (get @(rf/subscribe [:worksheets/modal-form-data]) :worksheet/custom-material-unit \"\")))\n                          (empty? (str (get @(rf/subscribe [:worksheets/modal-form-data]) :worksheet/custom-material-quantity \"\"))))\n             :style {:background (if (or (empty? (str (get @(rf/subscribe [:worksheets/modal-form-data]) :worksheet/custom-material-name \"\")))\n                                        (empty? (str (get @(rf/subscribe [:worksheets/modal-form-data]) :worksheet/custom-material-unit \"\")))\n                                        (empty? (str (get @(rf/subscribe [:worksheets/modal-form-data]) :worksheet/custom-material-quantity \"\"))))\n                                  \"#9ca3af\" \"#2563eb\")\n                    :color \"white\" :border \"none\" :border-radius \"6px\" :padding \"0.5rem 1rem\" :font-size \"0.875rem\" \n                    :cursor (if (or (empty? (str (get @(rf/subscribe [:worksheets/modal-form-data]) :worksheet/custom-material-name \"\")))\n                                   (empty? (str (get @(rf/subscribe [:worksheets/modal-form-data]) :worksheet/custom-material-unit \"\")))\n                                   (empty? (str (get @(rf/subscribe [:worksheets/modal-form-data]) :worksheet/custom-material-quantity \"\"))))\n                             \"not-allowed\" \"pointer\")\n                    :font-weight \"500\"}}\n     \"Add\"]]])\n\n(defn- materials-section\n  \"Render complete materials section\"\n  []\n  (let [materials (get @(rf/subscribe [:worksheets/modal-form-data]) :worksheet/material-usage [])\n        material-templates @(rf/subscribe [:material-templates/all])\n        selected-template-id (get @(rf/subscribe [:worksheets/modal-form-data]) :worksheet/selected-material-template \"\")]\n    [:div {:style {:margin-bottom \"1.5rem\"}}\n     [:h3 {:style {:margin-bottom \"1rem\" :font-size \"1.125rem\" :font-weight \"600\" :color \"#374151\"}}\n      \"Materials Used\"]\n     [:div\n      [existing-materials-list materials]\n      [template-material-selector material-templates selected-template-id]\n      [custom-material-inputs]]]))\n\n(defn- signature-display\n  \"Render signature as clickable display (non-active)\"\n  [ref-dispatch-key label]\n  (let [form-data @(rf/subscribe [:worksheets/modal-form-data])\n        signature-data (if (= ref-dispatch-key :worksheets/set-maintainer-signature-ref)\n                         (:worksheet/maintainer-signature form-data)\n                         (:worksheet/customer-signature form-data))]\n    (println \"DEBUG signature-display:\" label \"has signature data:\" (boolean signature-data))\n    [:div\n     [:label {:style {:display \"block\" :margin-bottom \"0.5rem\" :font-weight \"600\" :font-size \"0.875rem\" :color \"#374151\"}}\n      label]\n     [:div {:style {:border \"1px solid #d1d5db\"\n                    :border-radius \"8px\"\n                    :background \"#ffffff\"\n                    :width \"100%\"\n                    :max-width \"300px\"\n                    :height \"150px\"\n                    :cursor \"pointer\"\n                    :display \"flex\"\n                    :align-items \"center\"\n                    :justify-content \"center\"\n                    :position \"relative\"}\n            :on-click #(rf/dispatch [:worksheets/open-signature-zoom label])}\n      (if signature-data\n        (do\n          (println \"DEBUG signature-display: showing signature for\" label)\n          [:img {:src signature-data\n                 :style {:max-width \"100%\"\n                         :max-height \"100%\"\n                         :object-fit \"contain\"}}])\n        [:div {:style {:color \"#9ca3af\" :text-align \"center\" :font-size \"0.875rem\"}}\n         \"Click to sign\"])\n      [:div {:style {:position \"absolute\"\n                     :top \"5px\"\n                     :right \"5px\"\n                     :background \"rgba(0,0,0,0.5)\"\n                     :color \"white\"\n                     :border-radius \"3px\"\n                     :padding \"2px 6px\"\n                     :font-size \"0.75rem\"}}\n       \"\ud83d\udd0d\"]]]))\n\n(defn- signature-canvas\n  \"Render signature canvas for editing (used in overlay)\"\n  [ref-dispatch-key label]\n  [:div\n   [:label {:style {:display \"block\" :margin-bottom \"0.5rem\" :font-weight \"600\" :font-size \"0.875rem\" :color \"#374151\"}}\n    label]\n   [:> SignatureCanvas\n    {:penColor \"black\"\n     :canvasProps {:width 300\n                   :height 150\n                   :style {:border \"1px solid #d1d5db\"\n                           :border-radius \"8px\"\n                           :background \"#ffffff\"\n                           :display \"block\"\n                           :width \"100%\"\n                           :max-width \"300px\"}}\n     :ref (fn [ref] (rf/dispatch [ref-dispatch-key ref]))}]])\n\n(defn- signature-clear-buttons\n  \"Render signature clear buttons\"\n  []\n  [:div {:style {:display \"flex\" :justify-content \"space-between\" :margin-top \"0.5rem\"}}\n   [:button {:type \"button\"\n            :on-click (fn []\n                        (when-let [ref @(rf/subscribe [:worksheets/maintainer-signature-ref])]\n                          (.clear ref)))\n            :style {:padding \"0.25rem 0.75rem\" :font-size \"0.75rem\" :color \"#6b7280\" :background \"transparent\" :border \"1px solid #d1d5db\" :border-radius \"4px\" :cursor \"pointer\"}}\n    \"Clear Maintainer\"]\n   [:button {:type \"button\"\n            :on-click (fn []\n                        (when-let [ref @(rf/subscribe [:worksheets/customer-signature-ref])]\n                          (.clear ref)))\n            :style {:padding \"0.25rem 0.75rem\" :font-size \"0.75rem\" :color \"#6b7280\" :background \"transparent\" :border \"1px solid #d1d5db\" :border-radius \"4px\" :cursor \"pointer\"}}\n    \"Clear Customer\"]])\n\n(defn- signature-zoom-overlay\n  \"Full-screen overlay for signature editing\"\n  []\n  (let [zoom-data @(rf/subscribe [:worksheets/signature-zoom-data])]\n    (when zoom-data\n      [:div {:style {:position \"fixed\"\n                     :top 0\n                     :left 0\n                     :width \"100vw\"\n                     :height \"100vh\"\n                     :background \"rgba(0, 0, 0, 0.8)\"\n                     :display \"flex\"\n                     :align-items \"center\"\n                     :justify-content \"center\"\n                     :z-index 9999}\n             :on-click #(rf/dispatch [:worksheets/close-signature-zoom])}\n       [:div {:style {:background \"white\"\n                      :border-radius \"12px\"\n                      :padding \"2rem\"\n                      :width \"90vw\"\n                      :max-width \"600px\"\n                      :height \"auto\"\n                      :max-height \"80vh\"\n                      :position \"relative\"\n                      :overflow \"auto\"}\n              :on-click (fn [e] (.stopPropagation e))}\n        ;; Close button\n        [:button {:style {:position \"absolute\"\n                          :top \"10px\"\n                          :right \"10px\"\n                          :background \"transparent\"\n                          :border \"none\"\n                          :font-size \"1.5rem\"\n                          :cursor \"pointer\"\n                          :color \"#6b7280\"\n                          :width \"30px\"\n                          :height \"30px\"\n                          :display \"flex\"\n                          :align-items \"center\"\n                          :justify-content \"center\"}\n                  :on-click #(rf/dispatch [:worksheets/close-signature-zoom])}\n         \"\u00d7\"]\n        \n        ;; Content\n        [:h2 {:style {:margin \"0 0 1.5rem 0\" :font-size \"1.5rem\" :font-weight \"600\" :color \"#374151\"}}\n         (:label zoom-data)]\n        \n        ;; Signature canvas - larger for mobile/desktop\n        [:div {:style {:margin-bottom \"1.5rem\"}}\n         [:> SignatureCanvas\n          {:penColor \"black\"\n           :canvasProps {:width (if (< js/window.innerWidth 768) \n                                  (- js/window.innerWidth 80) \n                                  500)\n                         :height (if (< js/window.innerWidth 768) \n                                   250 \n                                   300)\n                         :style {:border \"2px solid #d1d5db\"\n                                 :border-radius \"8px\"\n                                 :background \"#ffffff\"\n                                 :display \"block\"\n                                 :width \"100%\"}}\n           :ref (fn [ref] \n                  (rf/dispatch [:worksheets/set-zoom-signature-ref ref])\n                  ;; Load existing signature data into zoom canvas\n                  (when ref\n                    (let [form-data @(rf/subscribe [:worksheets/modal-form-data])\n                          signature-data (if (= (:ref-dispatch-key zoom-data) :worksheets/set-maintainer-signature-ref)\n                                           (:worksheet/maintainer-signature form-data)\n                                           (:worksheet/customer-signature form-data))]\n                      (when signature-data\n                        (println \"DEBUG zoom canvas: loading existing signature data\")\n                        (.fromDataURL ref signature-data)))))}]]\n        \n        ;; Action buttons\n        [:div {:style {:display \"flex\" :justify-content \"space-between\" :gap \"1rem\"}}\n         [:button {:type \"button\"\n                   :on-click (fn []\n                               (when-let [ref @(rf/subscribe [:worksheets/zoom-signature-ref])]\n                                 (.clear ref)))\n                   :style {:padding \"0.75rem 1.5rem\" :font-size \"0.875rem\" :color \"#6b7280\" \n                           :background \"transparent\" :border \"1px solid #d1d5db\" :border-radius \"6px\" \n                           :cursor \"pointer\" :font-weight \"500\"}}\n          \"Clear\"]\n         [:button {:type \"button\"\n                   :on-click #(rf/dispatch [:worksheets/close-signature-zoom])\n                   :style {:padding \"0.75rem 1.5rem\" :font-size \"0.875rem\" :color \"white\"\n                           :background \"#3b82f6\" :border \"none\" :border-radius \"6px\"\n                           :cursor \"pointer\" :font-weight \"500\"}}\n          \"Done\"]]]])))\n\n(defn- signatures-section\n  \"Render complete signatures section\"\n  []\n  [:div {:style {:margin-bottom \"1.5rem\"}}\n   [:h3 {:style {:margin-bottom \"1rem\" :font-size \"1.125rem\" :font-weight \"600\" :color \"#374151\"}}\n    \"Signatures\"]\n   [:div {:style {:display \"grid\" :grid-template-columns \"1fr 1fr\" :gap \"1rem\"}}\n    [signature-display :worksheets/set-maintainer-signature-ref \"Maintainer Signature\"]\n    [signature-display :worksheets/set-customer-signature-ref \"Customer Signature\"]]\n   \n   ])\n\n\n(defn- save-button-click-handler\n  \"Handle save button click with validation and signature capture\"\n  [on-save]\n  (fn []\n    (let [form-data @(rf/subscribe [:worksheets/modal-form-data])\n          maintainer-signature (:worksheet/maintainer-signature form-data)\n          customer-signature (:worksheet/customer-signature form-data)]\n      (println \"DEBUG save-button: maintainer signature length:\" (when maintainer-signature (count maintainer-signature)))\n      (println \"DEBUG save-button: customer signature length:\" (when customer-signature (count customer-signature)))\n      (println \"DEBUG save-button: form-data keys:\" (keys form-data))\n      (println \"DEBUG save-button: has maintainer signature?\" (boolean maintainer-signature))\n      (println \"DEBUG save-button: has customer signature?\" (boolean customer-signature))\n      (let [validation-errors (validate-worksheet form-data)]\n        (if (empty? validation-errors)\n          (do\n            (rf/dispatch [:worksheets/set-modal-form-loading true])\n            (rf/dispatch [:worksheets/set-modal-form-errors {}])\n            (on-save form-data (fn [] (rf/dispatch [:worksheets/set-modal-form-loading false]))))\n          (rf/dispatch [:worksheets/set-modal-form-errors validation-errors]))))))\n\n(defn- modal-footer-buttons\n  \"Render modal footer buttons\"\n  [on-cancel on-save]\n  [modal/modal-footer\n   [enhanced-button/enhanced-button\n    {:variant :secondary\n     :on-click (fn []\n                (println \"Cancel button clicked\")\n                (rf/dispatch [:worksheets/clear-modal-form])\n                (when on-cancel (on-cancel)))\n     :text (tr/tr :worksheets/cancel)}]\n   [enhanced-button/enhanced-button\n    {:variant :primary\n     :loading? @(rf/subscribe [:worksheets/modal-form-loading?])\n     :on-click (save-button-click-handler on-save)\n     :text (if @(rf/subscribe [:worksheets/modal-form-loading?]) (tr/tr :worksheets/saving) (tr/tr :worksheets/save-worksheet))}]])\n\n(defn worksheet-modal\n  \"Modal for creating/editing worksheets using re-frame\"\n  [worksheet-data is-new? on-save on-cancel]\n  (println \"worksheet-modal called with is-new?:\" is-new? \"type:\" (type is-new?))\n  ;; Initialize form state in re-frame only once\n  (rf/dispatch [:worksheets/set-modal-form-data worksheet-data])\n  (rf/dispatch [:worksheets/set-modal-form-errors {}])\n  (rf/dispatch [:worksheets/set-modal-form-loading false])\n  (rf/dispatch [:material-templates/load (get-workspace-id)])\n  \n  (fn [worksheet-data is-new? on-save on-cancel]\n    (println \"worksheet-modal render function called\")\n    [:div\n     [modal/modal {:on-close (modal-close-handler on-cancel) \n                   :close-on-backdrop? true}\n      [modal/modal-header (modal-header-config is-new?)]\n      (let [errors @(rf/subscribe [:worksheets/modal-form-errors])]\n        [:div {:style {:padding \"20px\"}}\n         [basic-form-fields errors]\n         [address-form-field errors]\n         [work-info-form-fields errors]\n         [time-tracking-form-fields errors]\n         [notes-form-field errors]\n         [materials-section]\n         [signatures-section]])\n      [modal-footer-buttons on-cancel on-save]]\n     [signature-zoom-overlay]]))\n\n(defn- worksheet-serial-render\n  \"Custom render function for worksheet serial number column\"\n  [serial-number row]\n  [:div {:style {:font-weight \"600\" :color \"#111827\" :font-size \"0.875rem\"}}\n   serial-number])\n\n(defn- work-type-render\n  \"Custom render function for work type column with service type\"\n  [work-type row]\n  [:div\n   [:div {:style {:font-weight \"500\" :color \"#111827\" :font-size \"0.875rem\"\n                  :text-transform \"capitalize\"}}\n    work-type]\n   [:div {:style {:color \"#6b7280\" :font-size \"0.75rem\" :margin-top \"0.25rem\"\n                  :text-transform \"capitalize\"}}\n    (str \"Service: \" (:worksheet/service-type row))]])\n\n(defn- status-render\n  \"Custom render function for status column with colored badges\"\n  [status row]\n  (let [status-colors {\"draft\" {:bg \"#fef3c7\" :color \"#92400e\"}\n                      \"in_progress\" {:bg \"#dbeafe\" :color \"#1e40af\"}\n                      \"completed\" {:bg \"#d1fae5\" :color \"#065f46\"}\n                      \"cancelled\" {:bg \"#fee2e2\" :color \"#991b1b\"}}\n        colors (get status-colors status {:bg \"#f3f4f6\" :color \"#374151\"})]\n    [:span {:style {:display \"inline-block\" :padding \"0.25rem 0.75rem\"\n                    :background (:bg colors) :color (:color colors)\n                    :border-radius \"12px\" :font-size \"0.75rem\" :font-weight \"500\"\n                    :text-transform \"capitalize\"}}\n     (str/replace status \"_\" \" \")]))\n\n(defn- address-render\n  \"Custom render function for address column\"\n  [address-name row]\n  [:div\n   [:div {:style {:font-weight \"500\" :color \"#111827\" :font-size \"0.875rem\"}}\n    address-name]\n   (when (:worksheet/address-city row)\n     [:div {:style {:color \"#6b7280\" :font-size \"0.75rem\" :margin-top \"0.25rem\"}}\n      (:worksheet/address-city row)])])\n\n(defn- assigned-to-render\n  \"Custom render function for assigned to column\"\n  [assigned-to-name row]\n  [:div\n   (if assigned-to-name\n     [:div {:style {:color \"#374151\" :font-size \"0.875rem\" :font-weight \"500\"}}\n      assigned-to-name]\n     [:span {:style {:color \"#9ca3af\" :font-style \"italic\" :font-size \"0.75rem\"}}\n      \"Unassigned\"])])\n\n\n\n;; Re-frame events and subscriptions\n(rf/reg-sub\n  :worksheets/data\n  (fn [db _]\n    (get-in db [:worksheets :data] {:worksheets [] :pagination {}})))\n\n(rf/reg-sub\n  :worksheets/loading?\n  (fn [db _]\n    (get-in db [:worksheets :loading?] false)))\n\n(rf/reg-sub\n  :worksheets/modal-worksheet\n  (fn [db _]\n    (get-in db [:worksheets :modal-worksheet] nil)))\n\n(rf/reg-sub\n  :worksheets/modal-is-new?\n  (fn [db _]\n    (get-in db [:worksheets :modal-is-new?] false)))\n\n(rf/reg-sub\n  :worksheets/authenticated?\n  (fn [db _]\n    (get-in db [:worksheets :authenticated?] nil)))\n\n(rf/reg-event-db\n  :worksheets/set-loading\n  (fn [db [_ loading?]]\n    (assoc-in db [:worksheets :loading?] loading?)))\n\n(rf/reg-event-db\n  :worksheets/set-data\n  (fn [db [_ data]]\n    (-> db\n        (assoc-in [:worksheets :data] data)\n        (assoc-in [:worksheets :loading?] false))))\n\n(rf/reg-event-db\n  :worksheets/set-modal-worksheet\n  (fn [db [_ worksheet]]\n    (assoc-in db [:worksheets :modal-worksheet] worksheet)))\n\n(rf/reg-event-db\n  :worksheets/set-modal-is-new\n  (fn [db [_ is-new?]]\n    (assoc-in db [:worksheets :modal-is-new?] is-new?)))\n\n(rf/reg-event-db\n  :worksheets/set-authenticated\n  (fn [db [_ authenticated?]]\n    (assoc-in db [:worksheets :authenticated?] authenticated?)))\n\n(rf/reg-event-db\n  :worksheets/close-modal\n  (fn [db _]\n    (assoc-in db [:worksheets :modal-worksheet] nil)))\n\n;; Modal form state management\n(rf/reg-sub\n  :worksheets/modal-form-data\n  (fn [db _]\n    (get-in db [:worksheets :modal-form-data] {})))\n\n(rf/reg-sub\n  :worksheets/modal-form-errors\n  (fn [db _]\n    (get-in db [:worksheets :modal-form-errors] {})))\n\n(rf/reg-sub\n  :worksheets/modal-form-loading?\n  (fn [db _]\n    (get-in db [:worksheets :modal-form-loading?] false)))\n\n(rf/reg-event-db\n  :worksheets/set-modal-form-data\n  (fn [db [_ data]]\n    ;; Construct address object from address data\n    (let [enhanced-data (if (and (:worksheet/address-id data) \n                                 (:worksheet/address-name data))\n                          (assoc data :worksheet/address\n                                 {:address/id (:worksheet/address-id data)\n                                  :address/name (:worksheet/address-name data)\n                                  :address/display (str (:worksheet/address-name data) \n                                                        \" - \" (:worksheet/address-city data))})\n                          data)]\n      (assoc-in db [:worksheets :modal-form-data] enhanced-data))))\n\n(rf/reg-event-db\n  :worksheets/update-modal-form-field\n  (fn [db [_ field-key value]]\n    (assoc-in db [:worksheets :modal-form-data field-key] value)))\n\n(rf/reg-event-db\n  :worksheets/set-modal-form-errors\n  (fn [db [_ errors]]\n    (assoc-in db [:worksheets :modal-form-errors] errors)))\n\n(rf/reg-event-db\n  :worksheets/set-modal-form-loading\n  (fn [db [_ loading?]]\n    (assoc-in db [:worksheets :modal-form-loading?] loading?)))\n\n(rf/reg-event-db\n  :worksheets/modal-form-set-field\n  (fn [db [_ field-key value]]\n    (assoc-in db [:worksheets :modal-form-data field-key] value)))\n\n(rf/reg-sub\n  :worksheets/modal-form-field\n  (fn [db [_ field-key]]\n    (get-in db [:worksheets :modal-form-data field-key] nil)))\n\n(rf/reg-event-db\n  :worksheets/clear-modal-form\n  (fn [db _]\n    (-> db\n        (assoc-in [:worksheets :modal-form-data] {})\n        (assoc-in [:worksheets :modal-form-errors] {})\n        (assoc-in [:worksheets :modal-form-loading?] false)\n        (assoc-in [:worksheets :maintainer-signature-ref] nil)\n        (assoc-in [:worksheets :customer-signature-ref] nil)\n        (assoc-in [:worksheets :signature-zoom-data] nil)\n        (assoc-in [:worksheets :zoom-signature-ref] nil))))\n\n;; Signature canvas ref management\n(rf/reg-event-db\n  :worksheets/set-maintainer-signature-ref\n  (fn [db [_ ref]]\n    (println \"DEBUG set-maintainer-signature-ref:\" ref)\n    (assoc-in db [:worksheets :maintainer-signature-ref] ref)))\n\n(rf/reg-event-db\n  :worksheets/set-customer-signature-ref\n  (fn [db [_ ref]]\n    (println \"DEBUG set-customer-signature-ref:\" ref)\n    (assoc-in db [:worksheets :customer-signature-ref] ref)))\n\n(rf/reg-sub\n  :worksheets/maintainer-signature-ref\n  (fn [db _]\n    (get-in db [:worksheets :maintainer-signature-ref])))\n\n(rf/reg-sub\n  :worksheets/customer-signature-ref\n  (fn [db _]\n    (get-in db [:worksheets :customer-signature-ref])))\n\n;; Signature zoom overlay subscriptions and events\n(rf/reg-sub\n  :worksheets/signature-zoom-data\n  (fn [db _]\n    (get-in db [:worksheets :signature-zoom-data])))\n\n(rf/reg-sub\n  :worksheets/zoom-signature-ref\n  (fn [db _]\n    (get-in db [:worksheets :zoom-signature-ref])))\n\n(rf/reg-event-db\n  :worksheets/open-signature-zoom\n  (fn [db [_ label]]\n    (let [ref-dispatch-key (if (= label \"Maintainer Signature\")\n                             :worksheets/set-maintainer-signature-ref\n                             :worksheets/set-customer-signature-ref)]\n      (assoc-in db [:worksheets :signature-zoom-data]\n                {:label label\n                 :ref-dispatch-key ref-dispatch-key}))))\n\n(rf/reg-event-fx\n  :worksheets/close-signature-zoom\n  (fn [{:keys [db]} _]\n    (let [zoom-data (get-in db [:worksheets :signature-zoom-data])\n          zoom-ref (get-in db [:worksheets :zoom-signature-ref])]\n      (println \"DEBUG close-signature-zoom: zoom-data:\" zoom-data)\n      (println \"DEBUG close-signature-zoom: zoom-ref:\" zoom-ref)\n      (println \"DEBUG close-signature-zoom: zoom-ref isEmpty:\" (when zoom-ref (.isEmpty zoom-ref)))\n      ;; Store signature data directly in re-frame state\n      (let [new-db (if (and zoom-data zoom-ref (not (.isEmpty zoom-ref)))\n                     (let [signature-data (.toDataURL zoom-ref)\n                           signature-key (if (= (:ref-dispatch-key zoom-data) :worksheets/set-maintainer-signature-ref)\n                                           :worksheet/maintainer-signature\n                                           :worksheet/customer-signature)]\n                       (println \"DEBUG close-signature-zoom: storing signature data, length:\" (count signature-data))\n                       (-> db\n                           (assoc-in [:worksheets :modal-form-data signature-key] signature-data)\n                           (assoc-in [:worksheets :signature-zoom-data] nil)\n                           (assoc-in [:worksheets :zoom-signature-ref] nil)))\n                     (-> db\n                         (assoc-in [:worksheets :signature-zoom-data] nil)\n                         (assoc-in [:worksheets :zoom-signature-ref] nil)))]\n        {:db new-db}))))\n\n(rf/reg-event-db\n  :worksheets/set-zoom-signature-ref\n  (fn [db [_ ref]]\n    (assoc-in db [:worksheets :zoom-signature-ref] ref)))\n\n;; Material templates subscription\n(rf/reg-sub\n  :material-templates/all\n  (fn [db _]\n    (get-in db [:material-templates :all] [])))\n\n;; Material templates events\n(rf/reg-event-db\n  :material-templates/load\n  (fn [db [_ workspace-id]]\n    (when workspace-id\n      (parquery/send-queries\n       {:queries {:workspace-material-templates/get-all {:workspace-id workspace-id}}\n        :parquery/context {:workspace-id workspace-id}\n        :callback (fn [response]\n                   (rf/dispatch [:material-templates/loaded (:workspace-material-templates/get-all response)]))}))\n    db))\n\n(rf/reg-event-db\n  :material-templates/loaded\n  (fn [db [_ templates]]\n    (assoc-in db [:material-templates :all] (or templates []))))\n\n;; Form field update event\n(rf/reg-event-db\n  :worksheets/update-form-field\n  (fn [db [_ field-key value]]\n    (assoc-in db [:worksheets :modal-form-data field-key] value)))\n\n;; Material selection events\n(rf/reg-event-db\n  :worksheets/select-material-template\n  (fn [db [_ template-id]]\n    (assoc-in db [:worksheets :modal-form-data :worksheet/selected-material-template] template-id)))\n\n(rf/reg-event-db\n  :worksheets/add-selected-material\n  (fn [db _]\n    (let [form-data (get-in db [:worksheets :modal-form-data])\n          selected-template-id (:worksheet/selected-material-template form-data)\n          quantity (:worksheet/new-material-quantity form-data)\n          templates (get-in db [:material-templates :all] [])]\n      (if (and selected-template-id quantity (not (empty? (str quantity))))\n        (let [selected-template (first (filter #(= (:material-template/id %) selected-template-id) templates))\n              new-material {:name (:material-template/name selected-template)\n                           :unit (:material-template/unit selected-template)\n                           :quantity (str quantity)}\n              current-materials (get form-data :worksheet/material-usage [])]\n          (-> db\n              (assoc-in [:worksheets :modal-form-data :worksheet/material-usage] \n                       (conj current-materials new-material))\n              (assoc-in [:worksheets :modal-form-data :worksheet/selected-material-template] \"\")\n              (assoc-in [:worksheets :modal-form-data :worksheet/new-material-quantity] \"\")))\n        db))))\n\n(rf/reg-event-db\n  :worksheets/remove-material\n  (fn [db [_ idx]]\n    (let [current-materials (get-in db [:worksheets :modal-form-data :worksheet/material-usage] [])]\n      (assoc-in db [:worksheets :modal-form-data :worksheet/material-usage]\n               (vec (concat (take idx current-materials)\n                           (drop (inc idx) current-materials)))))))\n\n(rf/reg-event-db\n  :worksheets/add-custom-material\n  (fn [db _]\n    (let [form-data (get-in db [:worksheets :modal-form-data])\n          custom-name (:worksheet/custom-material-name form-data)\n          custom-unit (:worksheet/custom-material-unit form-data)\n          custom-quantity (:worksheet/custom-material-quantity form-data)]\n      (if (and custom-name custom-unit custom-quantity \n               (not (empty? (str custom-name)))\n               (not (empty? (str custom-unit)))\n               (not (empty? (str custom-quantity))))\n        (let [new-material {:name (str custom-name)\n                           :unit (str custom-unit)\n                           :quantity (str custom-quantity)}\n              current-materials (get form-data :worksheet/material-usage [])]\n          (-> db\n              (assoc-in [:worksheets :modal-form-data :worksheet/material-usage] \n                       (conj current-materials new-material))\n              (assoc-in [:worksheets :modal-form-data :worksheet/custom-material-name] \"\")\n              (assoc-in [:worksheets :modal-form-data :worksheet/custom-material-unit] \"\")\n              (assoc-in [:worksheets :modal-form-data :worksheet/custom-material-quantity] \"\")))\n        db))))\n\n;; REMOVED: Event to load worksheets - now using direct atom manipulation\n\n;; Event to handle authentication check\n(rf/reg-event-db\n  :worksheets/check-authentication\n  (fn [db _]\n    (parquery/send-queries\n     {:queries {:user/current {}}\n      :parquery/context {}\n      :callback (fn [response]\n                 (let [user (:user/current response)]\n                   (if (and user (:user/id user))\n                     (do \n                       (rf/dispatch [:worksheets/set-authenticated true])\n                       (when (empty? (:worksheets (get-in db [:worksheets :data]) []))\n                         (rf/dispatch [:worksheets/load-data {}])))\n                     (rf/dispatch [:worksheets/set-authenticated false]))))})\n    db))\n\n(defn view []\n  (let [workspace-id (get-workspace-id)\n        worksheets-data (r/atom [])\n        loading? (r/atom false)\n        modal-worksheet (r/atom nil)\n        modal-is-new? (r/atom false)\n        \n        load-worksheets (fn [params]\n                        (load-worksheets-query workspace-id params worksheets-data loading?))\n        \n        save-worksheet (fn [worksheet callback]\n                       (save-worksheet-query worksheet workspace-id modal-is-new? callback modal-worksheet load-worksheets))\n        \n        delete-worksheet (fn [worksheet-id]\n                         (delete-worksheet-query worksheet-id workspace-id (fn [] (load-worksheets {}))))]\n    \n    (fn []\n      ;; Load initial data\n      (when (empty? @worksheets-data)\n        (load-worksheets {}))\n      \n      [:div {:style {:min-height \"100vh\" :background \"#f9fafb\"}}\n     [:div {:style {:max-width \"1200px\" :margin \"0 auto\" :padding \"2rem\"}}\n      ;; Page header with modal controls\n        [page-header/page-header\n         {:title (tr/tr :worksheets/page-title)\n          :description (tr/tr :worksheets/page-description)\n          :action-button [enhanced-button/enhanced-button\n                          {:variant :success\n                           :on-click (fn [] \n                                      (reset! modal-worksheet {:worksheet/status \"draft\"\n                                                              :worksheet/work-type \"\"\n                                                              :worksheet/service-type \"\"\n                                                              :worksheet/creation-date (.toISOString (js/Date.))})\n                                      (reset! modal-is-new? true))\n                           :text (tr/tr :worksheets/add-new-worksheet)}]}]\n        \n        ;; Worksheets table \n      (str @worksheets-data)\n      [data-table/server-side-data-table\n       {:headers [{:key :worksheet/serial-number :label (tr/tr :worksheets/table-header-serial) :render worksheet-serial-render :sortable? true :style {:width \"200px\" :min-width \"200px\"} :cell-style {:width \"200px\" :min-width \"200px\"}}\n                  {:key :worksheet/work-type :label (tr/tr :worksheets/table-header-work-type) :render work-type-render :sortable? true}\n                  {:key :worksheet/address-name :label (tr/tr :worksheets/table-header-address) :render address-render :sortable? true}\n                  {:key :worksheet/assigned-to-name :label (tr/tr :worksheets/table-header-assigned-to) :render assigned-to-render :sortable? true}]\n        :data-source  @worksheets-data\n        :loading? @loading?\n        :empty-message (tr/tr :worksheets/no-worksheets-found)\n        :id-key :worksheet/id\n        :table-id :worksheets-table\n        :show-search? true\n        :show-pagination? true\n        :query-fn load-worksheets\n        :actions [{:key :edit :label (tr/tr :worksheets/action-edit) :variant :primary \n                   :on-click (fn [worksheet]\n                               (println \"Edit button clicked for worksheet:\" (:worksheet/id worksheet))\n                               (reset! modal-worksheet worksheet)\n                               (reset! modal-is-new? false)\n                               (println \"Edit button atom reset completed\"))}\n                  {:key :pdf :label (tr/tr :worksheets/action-pdf) :variant :secondary\n                   :on-click (fn [worksheet]\n                               (let [pdf-url (str \"/pdf-generator/worksheet/\" (:worksheet/id worksheet))]\n                                 (js/window.open pdf-url \"_blank\")))}\n                  {:key :delete :label (tr/tr :worksheets/action-delete) :variant :danger \n                   :on-click (fn [row] \n                               (when (js/confirm (tr/tr :worksheets/confirm-delete))\n                                 (delete-worksheet (:worksheet/id row))))}]}]\n        \n        ;; Modal when open\n        (when @modal-worksheet\n          [worksheet-modal @modal-worksheet @modal-is-new? save-worksheet\n           (fn [] (reset! modal-worksheet nil))])]])))"]}
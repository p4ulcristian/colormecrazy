goog.provide('features.app.login.frontend.view');
features.app.login.frontend.view.login_form = (function features$app$login$frontend$view$login_form(){
var form_data = reagent.core.atom.cljs$core$IFn$_invoke$arity$1(new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("user","username","user/username",1599713859),"",new cljs.core.Keyword("user","password","user/password",430055242),""], null));
var errors = reagent.core.atom.cljs$core$IFn$_invoke$arity$1(cljs.core.PersistentArrayMap.EMPTY);
var loading_QMARK_ = reagent.core.atom.cljs$core$IFn$_invoke$arity$1(false);
var validate_form = (function (data){
var username = new cljs.core.Keyword("user","username","user/username",1599713859).cljs$core$IFn$_invoke$arity$1(data);
var password = new cljs.core.Keyword("user","password","user/password",430055242).cljs$core$IFn$_invoke$arity$1(data);
var G__39895 = cljs.core.PersistentArrayMap.EMPTY;
var G__39895__$1 = (((((cljs.core.str.cljs$core$IFn$_invoke$arity$1(username)).length) < (3)))?cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(G__39895,new cljs.core.Keyword("user","username","user/username",1599713859),translations.core.tr(new cljs.core.Keyword("login","username-min-length","login/username-min-length",-1464576370))):G__39895);
if((((cljs.core.str.cljs$core$IFn$_invoke$arity$1(password)).length) < (1))){
return cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(G__39895__$1,new cljs.core.Keyword("user","password","user/password",430055242),translations.core.tr(new cljs.core.Keyword("login","password-required","login/password-required",-449181221)));
} else {
return G__39895__$1;
}
});
var handle_login = (function (){
cljs.core.reset_BANG_(loading_QMARK_,true);

cljs.core.reset_BANG_(errors,cljs.core.PersistentArrayMap.EMPTY);

var validation_errors = validate_form(cljs.core.deref(form_data));
if(cljs.core.seq(validation_errors)){
cljs.core.reset_BANG_(errors,validation_errors);

return cljs.core.reset_BANG_(loading_QMARK_,false);
} else {
return parquery.frontend.request.send_queries(new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"queries","queries",1446291995),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword("users","login","users/login",8518519),cljs.core.deref(form_data)], null),new cljs.core.Keyword("parquery","context","parquery/context",661391038),cljs.core.PersistentArrayMap.EMPTY,new cljs.core.Keyword(null,"callback","callback",-705136228),(function (response){
var result = new cljs.core.Keyword("users","login","users/login",8518519).cljs$core$IFn$_invoke$arity$1(response);
cljs.core.reset_BANG_(loading_QMARK_,false);

if(cljs.core.truth_(new cljs.core.Keyword(null,"success","success",1890645906).cljs$core$IFn$_invoke$arity$1(result))){
if(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2("superadmin",new cljs.core.Keyword("user","role","user/role",-742594495).cljs$core$IFn$_invoke$arity$1(result))){
return (window.location = "/superadmin");
} else {
if(cljs.core.truth_(new cljs.core.Keyword("user","workspace-id","user/workspace-id",-168132192).cljs$core$IFn$_invoke$arity$1(result))){
return (window.location = ["/app/",cljs.core.str.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword("user","workspace-id","user/workspace-id",-168132192).cljs$core$IFn$_invoke$arity$1(result))].join(''));
} else {
return (window.location = "/app");

}
}
} else {
return cljs.core.reset_BANG_(errors,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"general","general",380803686),new cljs.core.Keyword(null,"error","error",-978969032).cljs$core$IFn$_invoke$arity$1(result)], null));
}
})], null));
}
});
return (function (){
return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1057191632),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"style","style",-496642736),new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"min-height","min-height",398480837),"100vh",new cljs.core.Keyword(null,"display","display",242065432),"flex",new cljs.core.Keyword(null,"align-items","align-items",-267946462),"center",new cljs.core.Keyword(null,"justify-content","justify-content",-1990475787),"center",new cljs.core.Keyword(null,"background","background",-863952629),"linear-gradient(135deg, #ae6e1f 0%, #72a9bf 50%, #ae6e1f 100%)"], null)], null),new cljs.core.PersistentVector(null, 6, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1057191632),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"style","style",-496642736),new cljs.core.PersistentArrayMap(null, 6, [new cljs.core.Keyword(null,"background","background",-863952629),"white",new cljs.core.Keyword(null,"padding","padding",1660304693),"2rem",new cljs.core.Keyword(null,"border-radius","border-radius",419594011),"8px",new cljs.core.Keyword(null,"box-shadow","box-shadow",1600206755),"0 4px 6px rgba(0, 0, 0, 0.1)",new cljs.core.Keyword(null,"width","width",-384071477),"400px",new cljs.core.Keyword(null,"max-width","max-width",-1939924051),"90vw"], null)], null),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1057191632),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"style","style",-496642736),new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"display","display",242065432),"flex",new cljs.core.Keyword(null,"align-items","align-items",-267946462),"center",new cljs.core.Keyword(null,"justify-content","justify-content",-1990475787),"center",new cljs.core.Keyword(null,"gap","gap",80255254),"12px",new cljs.core.Keyword(null,"margin-bottom","margin-bottom",388334941),"1.5rem"], null)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"img","img",1442687358),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"src","src",-1651076051),"/logo/logo-256.webp",new cljs.core.Keyword(null,"alt","alt",-3214426),"Logo",new cljs.core.Keyword(null,"style","style",-496642736),new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"height","height",1025178622),"50px",new cljs.core.Keyword(null,"width","width",-384071477),"50px",new cljs.core.Keyword(null,"border-radius","border-radius",419594011),"12px",new cljs.core.Keyword(null,"object-fit","object-fit",-429593694),"cover"], null)], null)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"h2","h2",-372662728),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"style","style",-496642736),new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"margin","margin",-995903681),"0",new cljs.core.Keyword(null,"color","color",1011675173),"#ae6e1f",new cljs.core.Keyword(null,"font-family","font-family",-667419874),"'Dancing Script', cursive",new cljs.core.Keyword(null,"font-size","font-size",-1847940346),"2rem",new cljs.core.Keyword(null,"font-weight","font-weight",2085804583),"700"], null)], null),translations.core.tr(new cljs.core.Keyword("header","brand","header/brand",-393563622))], null)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"p","p",151049309),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"style","style",-496642736),new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"text-align","text-align",1786091845),"center",new cljs.core.Keyword(null,"margin-bottom","margin-bottom",388334941),"1.5rem",new cljs.core.Keyword(null,"color","color",1011675173),"#666",new cljs.core.Keyword(null,"font-size","font-size",-1847940346),"1rem"], null)], null),translations.core.tr(new cljs.core.Keyword("login","title","login/title",730505624))], null),(cljs.core.truth_(new cljs.core.Keyword(null,"general","general",380803686).cljs$core$IFn$_invoke$arity$1(cljs.core.deref(errors)))?new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1057191632),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"style","style",-496642736),new cljs.core.PersistentArrayMap(null, 6, [new cljs.core.Keyword(null,"background","background",-863952629),"#f8d7da",new cljs.core.Keyword(null,"border","border",1444987323),"1px solid #f5c6cb",new cljs.core.Keyword(null,"color","color",1011675173),"#721c24",new cljs.core.Keyword(null,"padding","padding",1660304693),"0.75rem",new cljs.core.Keyword(null,"border-radius","border-radius",419594011),"4px",new cljs.core.Keyword(null,"margin-bottom","margin-bottom",388334941),"1rem"], null)], null),new cljs.core.Keyword(null,"general","general",380803686).cljs$core$IFn$_invoke$arity$1(cljs.core.deref(errors))], null):null),new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"form","form",-1624062471),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"on-submit","on-submit",1227871159),(function (e){
e.preventDefault();

return handle_login();
})], null),new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1057191632),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"style","style",-496642736),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"margin-bottom","margin-bottom",388334941),"1rem"], null)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"label","label",1718410804),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"style","style",-496642736),new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"display","display",242065432),"block",new cljs.core.Keyword(null,"margin-bottom","margin-bottom",388334941),"0.5rem",new cljs.core.Keyword(null,"font-weight","font-weight",2085804583),"bold",new cljs.core.Keyword(null,"color","color",1011675173),(cljs.core.truth_(new cljs.core.Keyword("user","username","user/username",1599713859).cljs$core$IFn$_invoke$arity$1(cljs.core.deref(errors)))?"#dc3545":"inherit")], null)], null),translations.core.tr(new cljs.core.Keyword("login","username","login/username",2034939361))], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"input","input",556931961),new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"type","type",1174270348),"text",new cljs.core.Keyword(null,"value","value",305978217),new cljs.core.Keyword("user","username","user/username",1599713859).cljs$core$IFn$_invoke$arity$1(cljs.core.deref(form_data)),new cljs.core.Keyword(null,"on-change","on-change",-732046149),(function (p1__39872_SHARP_){
return cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$4(form_data,cljs.core.assoc,new cljs.core.Keyword("user","username","user/username",1599713859),p1__39872_SHARP_.target.value);
}),new cljs.core.Keyword(null,"placeholder","placeholder",-104873083),translations.core.tr(new cljs.core.Keyword("login","username-placeholder","login/username-placeholder",-157410154)),new cljs.core.Keyword(null,"style","style",-496642736),new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"width","width",-384071477),"100%",new cljs.core.Keyword(null,"padding","padding",1660304693),"0.75rem",new cljs.core.Keyword(null,"border","border",1444987323),["1px solid ",(cljs.core.truth_(new cljs.core.Keyword("user","username","user/username",1599713859).cljs$core$IFn$_invoke$arity$1(cljs.core.deref(errors)))?"#dc3545":"#ccc")].join(''),new cljs.core.Keyword(null,"border-radius","border-radius",419594011),"4px",new cljs.core.Keyword(null,"font-size","font-size",-1847940346),"1rem"], null)], null)], null),(cljs.core.truth_(new cljs.core.Keyword("user","username","user/username",1599713859).cljs$core$IFn$_invoke$arity$1(cljs.core.deref(errors)))?new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1057191632),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"style","style",-496642736),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"color","color",1011675173),"#dc3545",new cljs.core.Keyword(null,"font-size","font-size",-1847940346),"0.875rem",new cljs.core.Keyword(null,"margin-top","margin-top",392161226),"0.25rem"], null)], null),new cljs.core.Keyword("user","username","user/username",1599713859).cljs$core$IFn$_invoke$arity$1(cljs.core.deref(errors))], null):null)], null),new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1057191632),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"style","style",-496642736),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"margin-bottom","margin-bottom",388334941),"1.5rem"], null)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"label","label",1718410804),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"style","style",-496642736),new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"display","display",242065432),"block",new cljs.core.Keyword(null,"margin-bottom","margin-bottom",388334941),"0.5rem",new cljs.core.Keyword(null,"font-weight","font-weight",2085804583),"bold",new cljs.core.Keyword(null,"color","color",1011675173),(cljs.core.truth_(new cljs.core.Keyword("user","password","user/password",430055242).cljs$core$IFn$_invoke$arity$1(cljs.core.deref(errors)))?"#dc3545":"inherit")], null)], null),translations.core.tr(new cljs.core.Keyword("login","password","login/password",464605936))], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"input","input",556931961),new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"type","type",1174270348),"password",new cljs.core.Keyword(null,"value","value",305978217),new cljs.core.Keyword("user","password","user/password",430055242).cljs$core$IFn$_invoke$arity$1(cljs.core.deref(form_data)),new cljs.core.Keyword(null,"on-change","on-change",-732046149),(function (p1__39877_SHARP_){
return cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$4(form_data,cljs.core.assoc,new cljs.core.Keyword("user","password","user/password",430055242),p1__39877_SHARP_.target.value);
}),new cljs.core.Keyword(null,"placeholder","placeholder",-104873083),translations.core.tr(new cljs.core.Keyword("login","password-placeholder","login/password-placeholder",-1158876559)),new cljs.core.Keyword(null,"style","style",-496642736),new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"width","width",-384071477),"100%",new cljs.core.Keyword(null,"padding","padding",1660304693),"0.75rem",new cljs.core.Keyword(null,"border","border",1444987323),["1px solid ",(cljs.core.truth_(new cljs.core.Keyword("user","password","user/password",430055242).cljs$core$IFn$_invoke$arity$1(cljs.core.deref(errors)))?"#dc3545":"#ccc")].join(''),new cljs.core.Keyword(null,"border-radius","border-radius",419594011),"4px",new cljs.core.Keyword(null,"font-size","font-size",-1847940346),"1rem"], null)], null)], null),(cljs.core.truth_(new cljs.core.Keyword("user","password","user/password",430055242).cljs$core$IFn$_invoke$arity$1(cljs.core.deref(errors)))?new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1057191632),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"style","style",-496642736),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"color","color",1011675173),"#dc3545",new cljs.core.Keyword(null,"font-size","font-size",-1847940346),"0.875rem",new cljs.core.Keyword(null,"margin-top","margin-top",392161226),"0.25rem"], null)], null),new cljs.core.Keyword("user","password","user/password",430055242).cljs$core$IFn$_invoke$arity$1(cljs.core.deref(errors))], null):null)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"button","button",1456579943),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"type","type",1174270348),"submit",new cljs.core.Keyword(null,"disabled","disabled",-1529784218),cljs.core.deref(loading_QMARK_),new cljs.core.Keyword(null,"style","style",-496642736),cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"color","color",1011675173),new cljs.core.Keyword(null,"font-size","font-size",-1847940346),new cljs.core.Keyword(null,"width","width",-384071477),new cljs.core.Keyword(null,"background","background",-863952629),new cljs.core.Keyword(null,"cursor","cursor",1011937484),new cljs.core.Keyword(null,"opacity","opacity",397153780),new cljs.core.Keyword(null,"padding","padding",1660304693),new cljs.core.Keyword(null,"border","border",1444987323),new cljs.core.Keyword(null,"border-radius","border-radius",419594011)],["white","1rem","100%",(cljs.core.truth_(cljs.core.deref(loading_QMARK_))?"#6c757d":"#72a9bf"),(cljs.core.truth_(cljs.core.deref(loading_QMARK_))?"not-allowed":"pointer"),(cljs.core.truth_(cljs.core.deref(loading_QMARK_))?0.6:(1)),"0.75rem","none","4px"])], null),(cljs.core.truth_(cljs.core.deref(loading_QMARK_))?translations.core.tr(new cljs.core.Keyword("login","logging-in","login/logging-in",-2076010697)):translations.core.tr(new cljs.core.Keyword("login","login","login/login",16833816)))], null)], null)], null)], null);
});
});
features.app.login.frontend.view.view = (function features$app$login$frontend$view$view(){
return new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [features.app.login.frontend.view.login_form], null);
});

//# sourceMappingURL=features.app.login.frontend.view.js.map

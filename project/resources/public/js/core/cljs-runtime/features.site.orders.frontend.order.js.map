{"version":3,"sources":["features/site/orders/frontend/order.cljs"],"mappings":"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","names":["features.site.orders.frontend.order/status-badge","status","G__27357","features.site.orders.frontend.order/payment-status-badge","payment-status","G__27358","G__27363","or__5025__auto__","features.site.orders.frontend.order/urgency-badge","urgency","G__27364","G__27365","features.site.orders.frontend.order/source-badge","source","G__27366","G__27367","features.site.orders.frontend.order/job-card","job","and__5023__auto__","cljs.core/not-empty","features.site.orders.frontend.order/order-jobs","jobs","cljs.core/empty?","cljs.core.map_indexed","idx","features.site.orders.frontend.order/format-date","date-str","date","js/Date","features.site.orders.frontend.order/order-header","order","cljs.core.subs","features.site.orders.frontend.order/order-details","features.site.orders.frontend.order/view","vec__27372","cljs.core.nth","vec__27375","order-id","G__27378","zero.frontend.re-frame/subscribe","set-order","zero.frontend.react/use-state","loading","set-loading","zero.frontend.react/use-effect","cljs.core/deref","app.frontend.request/pathom","response","G__27379","cljs.core.merge"],"sourcesContent":["(ns features.site.orders.frontend.order\n  (:require\n   [zero.frontend.react :as react]\n   [zero.frontend.re-frame :refer [subscribe]]\n   [app.frontend.request :as request]))\n\n(defn status-badge [status]\n  [:span {:style {:padding \"0.5rem 1rem\"\n                  :border-radius \"9999px\"\n                  :font-size \"0.875rem\"\n                  :font-weight \"600\"\n                  :text-transform \"uppercase\"\n                  :letter-spacing \"0.05em\"\n                  :background (case status\n                               \"order-submitted\" \"#10b981\"\n                               \"in-progress\" \"#3b82f6\"\n                               \"completed\" \"#10b981\"\n                               \"cancelled\" \"#ef4444\"\n                               \"#6b7280\")\n                  :color \"#ffffff\"}}\n   status])\n\n(defn payment-status-badge [payment-status]\n  [:span {:style {:padding \"0.25rem 0.75rem\"\n                  :border-radius \"6px\"\n                  :font-size \"0.75rem\"\n                  :font-weight \"500\"\n                  :background (case payment-status\n                                \"paid\" \"#dcfce7\"\n                                \"pending\" \"#fef3c7\"\n                                \"failed\" \"#fecaca\"\n                                \"unpaid\" \"#f3f4f6\"\n                                \"#f3f4f6\")\n                  :color (case payment-status\n                           \"paid\" \"#166534\"\n                           \"pending\" \"#d97706\"\n                           \"failed\" \"#dc2626\"\n                           \"unpaid\" \"#6b7280\"\n                           \"#6b7280\")}}\n   (or payment-status \"unpaid\")])\n\n(defn urgency-badge [urgency]\n  [:span {:style {:padding \"0.25rem 0.75rem\"\n                  :border-radius \"6px\"\n                  :font-size \"0.75rem\"\n                  :font-weight \"500\"\n                  :background (case urgency\n                               \"rush\" \"#fef2f2\"\n                               \"high\" \"#fff7ed\"\n                               \"normal\" \"#f0f9ff\"\n                               \"low\" \"#f9fafb\"\n                               \"#f9fafb\")\n                  :color (case urgency\n                          \"rush\" \"#dc2626\"\n                          \"high\" \"#ea580c\"\n                          \"normal\" \"#0369a1\"\n                          \"low\" \"#6b7280\"\n                          \"#6b7280\")}}\n   urgency])\n\n(defn source-badge [source]\n  [:span {:style {:padding \"0.25rem 0.75rem\"\n                  :border-radius \"6px\"\n                  :font-size \"0.75rem\"\n                  :font-weight \"500\"\n                  :background (case source\n                               \"website\" \"#f0f9ff\"\n                               \"phone\" \"#fef2f2\"\n                               \"email\" \"#f0fdf4\"\n                               \"#f9fafb\")\n                  :color (case source\n                          \"website\" \"#0369a1\"\n                          \"phone\" \"#dc2626\"\n                          \"email\" \"#16a34a\"\n                          \"#6b7280\")}}\n   source])\n\n(defn job-card [job]\n  [:div {:style {:background \"white\"\n                 :border \"1px solid #e5e7eb\"\n                 :border-radius \"8px\"\n                 :padding \"16px\"\n                 :margin-bottom \"12px\"\n                 :display \"flex\"\n                 :gap \"16px\"}}\n   ;; Part image\n   [:div {:style {:flex-shrink 0}}\n    (if (:part_picture_url job)\n      [:img {:src (:part_picture_url job)\n             :alt (:part_name job)\n             :style {:width \"80px\"\n                     :height \"80px\"\n                     :object-fit \"cover\"\n                     :border-radius \"6px\"\n                     :border \"1px solid #e5e7eb\"}}]\n      [:div {:style {:width \"80px\"\n                     :height \"80px\"\n                     :background \"#f3f4f6\"\n                     :border-radius \"6px\"\n                     :display \"flex\"\n                     :align-items \"center\"\n                     :justify-content \"center\"\n                     :color \"#9ca3af\"\n                     :font-size \"2rem\"}}\n       \"\ud83d\udce6\"])]\n   \n   ;; Job details\n   [:div {:style {:flex 1}}\n    [:div {:style {:display \"flex\"\n                   :justify-content \"space-between\"\n                   :align-items \"flex-start\"\n                   :margin-bottom \"8px\"}}\n     [:h4 {:style {:font-size \"1.1rem\"\n                   :font-weight \"600\"\n                   :color \"#1f2937\"\n                   :margin 0}}\n      (:part_name job)]\n     [:span {:style {:font-size \"1rem\"\n                     :font-weight \"600\"\n                     :color \"#6b7280\"}}\n      (str \"Qty: \" (:quantity job))]]\n    \n    [:div {:style {:display \"flex\"\n                   :align-items \"center\"\n                   :gap \"12px\"\n                   :margin-bottom \"8px\"}}\n     ;; Look/Color info\n     (when (:look_name job)\n       [:div {:style {:display \"flex\"\n                      :align-items \"center\"\n                      :gap \"8px\"}}\n        (when (:look_thumbnail job)\n          [:img {:src (:look_thumbnail job)\n                 :alt (:look_name job)\n                 :style {:width \"24px\"\n                         :height \"24px\"\n                         :border-radius \"4px\"\n                         :border \"1px solid #e5e7eb\"}}])\n        [:div {:style {:display \"flex\"\n                       :flex-direction \"column\"}}\n         [:span {:style {:font-size \"0.875rem\"\n                         :font-weight \"500\"\n                         :color \"#374151\"}}\n          (:look_name job)]\n         [:span {:style {:font-size \"0.75rem\"\n                         :color \"#6b7280\"}}\n          (:color_family job)]]])\n     \n     ;; Material\n     (when (:material job)\n       [:span {:style {:padding \"2px 6px\"\n                       :background \"#f3f4f6\"\n                       :border-radius \"4px\"\n                       :font-size \"0.75rem\"\n                       :color \"#374151\"}}\n        (:material job)])]\n    \n    ;; Description\n    (when (and (:part_description job) (not-empty (:part_description job)))\n      [:p {:style {:font-size \"0.875rem\"\n                   :color \"#6b7280\"\n                   :margin 0\n                   :line-height \"1.4\"}}\n       (:part_description job)])]])\n\n(defn order-jobs [jobs]\n  [:div {:style {:background \"white\"\n                 :border-radius \"12px\"\n                 :padding \"24px\"\n                 :margin-top \"24px\"\n                 :box-shadow \"0 1px 3px rgba(0,0,0,0.1)\"}}\n   [:h3 {:style {:font-size \"1.25rem\"\n                 :font-weight \"600\"\n                 :color \"#1f2937\"\n                 :margin-bottom \"16px\"}}\n    \"Parts & Finishes\"]\n   \n   (if (empty? jobs)\n     [:div {:style {:text-align \"center\"\n                    :padding \"32px\"\n                    :color \"#6b7280\"}}\n      [:div {:style {:font-size \"3rem\"\n                     :margin-bottom \"8px\"}} \"\ud83d\udccb\"]\n      [:p \"No parts found for this order\"]]\n     [:div\n      (map-indexed \n       (fn [idx job]\n         ^{:key (str (:job_id job) \"-\" idx)}\n         [job-card job])\n       jobs)])])\n\n(defn format-date [date-str]\n  (when date-str\n    (let [date (js/Date. date-str)]\n      (.toLocaleDateString date \"en-US\" #js {:year \"numeric\"\n                                            :month \"short\"\n                                            :day \"numeric\"\n                                            :hour \"2-digit\"\n                                            :minute \"2-digit\"}))))\n\n(defn order-header [order]\n  [:div {:style {:background \"linear-gradient(135deg, #2c3e50 0%, #34495e 50%, #2c3e50 100%)\"\n                 :color \"white\"\n                 :padding \"32px\"\n                 :border-radius \"12px\"\n                 :margin-bottom \"24px\"\n                 :box-shadow \"0 8px 32px rgba(0,0,0,0.12)\"}}\n   [:div {:style {:display \"flex\"\n                  :justify-content \"space-between\"\n                  :align-items \"flex-start\"}}\n    [:div\n     [:h1 {:style {:font-size \"2rem\" \n                   :font-weight 700 \n                   :color \"white\" \n                   :margin \"0 0 8px 0\"\n                   :text-shadow \"0 2px 4px rgba(0,0,0,0.2)\"}} \n      (str \"Order #\" (subs (:id order) 0 8))]\n     [:p {:style {:font-size \"1.1rem\"\n                  :margin 0\n                  :opacity 0.9\n                  :font-weight 400}}\n      (str \"Created: \" (format-date (:created_at order)))]]\n    [:div {:style {:display \"flex\"\n                   :align-items \"center\"\n                   :gap \"12px\"}}\n     [status-badge (:status order)]]]])\n\n(defn order-details [order]\n  [:div {:style {:background \"white\"\n                 :border-radius \"12px\"\n                 :padding \"24px\"\n                 :box-shadow \"0 1px 3px rgba(0,0,0,0.1)\"}}\n   [:div {:style {:display \"grid\"\n                  :grid-template-columns \"repeat(auto-fit, minmax(250px, 1fr))\"\n                  :gap \"24px\"}}\n    [:div\n     [:h3 {:style {:font-size \"1.125rem\"\n                   :font-weight \"600\"\n                   :color \"#1f2937\"\n                   :margin-bottom \"16px\"}}\n      \"Order Information\"]\n     [:div {:style {:display \"flex\"\n                    :flex-direction \"column\"\n                    :gap \"12px\"}}\n      [:div\n       [:span {:style {:font-size \"0.875rem\"\n                       :color \"#6b7280\"}}\n        \"Order ID\"]\n       [:p {:style {:margin \"4px 0 0 0\"\n                    :font-weight \"500\"\n                    :color \"#1f2937\"}}\n        (:id order)]]\n      [:div\n       [:span {:style {:font-size \"0.875rem\"\n                       :color \"#6b7280\"}}\n        \"Created At\"]\n       [:p {:style {:margin \"4px 0 0 0\"\n                    :font-weight \"500\"\n                    :color \"#1f2937\"}}\n        (format-date (:created_at order))]]\n      [:div\n       [:span {:style {:font-size \"0.875rem\"\n                       :color \"#6b7280\"}}\n        \"Due Date\"]\n       [:p {:style {:margin \"4px 0 0 0\"\n                    :font-weight \"500\"\n                    :color \"#1f2937\"}}\n        (format-date (:due_date order))]]\n      \n      (when (:payment_intent_id order)\n        [:div\n         [:span {:style {:font-size \"0.875rem\"\n                         :color \"#6b7280\"}}\n          \"Payment Intent\"]\n         [:p {:style {:margin \"4px 0 0 0\"\n                      :font-weight \"500\"\n                      :color \"#1f2937\"\n                      :font-family \"monospace\"\n                      :font-size \"0.8rem\"}}\n          (:payment_intent_id order)]])]]\n    \n    [:div\n     [:h3 {:style {:font-size \"1.125rem\"\n                   :font-weight \"600\"\n                   :color \"#1f2937\"\n                   :margin-bottom \"16px\"}}\n      \"Status & Priority\"]\n     [:div {:style {:display \"flex\"\n                    :flex-direction \"column\"\n                    :gap \"12px\"}}\n      [:div\n       [:span {:style {:font-size \"0.875rem\"\n                       :color \"#6b7280\"}}\n        \"Order Status\"]\n       [:div {:style {:margin-top \"4px\"}}\n        [status-badge (:status order)]]]\n      [:div\n       [:span {:style {:font-size \"0.875rem\"\n                       :color \"#6b7280\"}}\n        \"Payment Status\"]\n       [:div {:style {:margin-top \"4px\"}}\n        [payment-status-badge (:payment_status order)]]]\n      [:div\n       [:span {:style {:font-size \"0.875rem\"\n                       :color \"#6b7280\"}}\n        \"Urgency\"]\n       [:div {:style {:margin-top \"4px\"}}\n        [urgency-badge (:urgency order)]]]\n      [:div\n       [:span {:style {:font-size \"0.875rem\"\n                       :color \"#6b7280\"}}\n        \"Source\"]\n       [:div {:style {:margin-top \"4px\"}}\n        [source-badge (:source order)]]]]]]])\n\n(defn view []\n  (let [order-id (subscribe [:db/get-in [:router :path-params :order-id]])\n        [order set-order] (react/use-state nil)\n        [loading set-loading] (react/use-state true)]\n    \n    (react/use-effect\n     {:mount (fn []\n               (set-loading true)\n               (request/pathom\n                {:query '[:site/order :site/order-jobs]\n                 :initial-data {:order/id @order-id}\n                 :callback (fn [response]\n                            (set-loading false)\n                            (set-order (merge (:site/order response)\n                                              {:jobs (:site/order-jobs response)})))}))})\n    \n    (if loading\n      [:div {:style {:display \"flex\"\n                     :justify-content \"center\"\n                     :align-items \"center\"\n                     :min-height \"400px\"}}\n       [:div {:style {:color \"#6b7280\"\n                      :font-size \"1.125rem\"}}\n        \"Loading order details...\"]]\n      (if order\n        [:div {:style {:max-width \"1200px\"\n                       :margin \"0 auto\"\n                       :padding \"24px\"}}\n         [order-header order]\n         [order-details order]\n         [order-jobs (:jobs order)]]\n        [:div {:style {:display \"flex\"\n                       :justify-content \"center\"\n                       :align-items \"center\"\n                       :min-height \"400px\"}}\n         [:div {:style {:color \"#6b7280\"\n                        :font-size \"1.125rem\"}}\n          \"Order not found\"]]))))"]}